module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=34)}([function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("util")},function(t,e,n){try{var i=n(2);if("function"!=typeof i.inherits)throw"";t.exports=i.inherits}catch(e){t.exports=n(56)}},function(t,e,n){"use strict";var i=n(9),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var s=n(7);s.inherits=n(3);var o=n(24),a=n(27);s.inherits(h,o);for(var c=r(a.prototype),l=0;l<c.length;l++){var u=c[l];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},function(t,e,n){var i=n(23);"disable"===process.env.READABLE_STREAM&&i?(t.exports=i,(e=t.exports=i.Readable).Readable=i.Readable,e.Writable=i.Writable,e.Duplex=i.Duplex,e.Transform=i.Transform,e.PassThrough=i.PassThrough,e.Stream=i):((e=t.exports=n(24)).Stream=i||e,e.Readable=e,e.Writable=n(27),e.Duplex=n(4),e.Transform=n(29),e.PassThrough=n(71))},function(t,e,n){var i=n(68),r=i.Buffer;function s(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=o),s(r,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=Buffer.isBuffer},function(t,e,n){var i=n(22);function r(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function s(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}t.exports=i(r),t.exports.strict=i(s),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})})},function(t,e,n){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,i)});default:for(r=new Array(o-1),s=0;s<r.length;)r[s++]=arguments[s];return process.nextTick(function(){t.apply(null,r)})}}}:t.exports=process},function(t,e){t.exports=require("os")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(17),r=n(0),s=n(16),o=n(50),a=n(12),c=n(1),l=n(51),u=n(59),h=n(81);e.default=class{constructor(t,e){this.state=t,this.settings=e,process.on("exit",()=>{this.kill()})}log(t){let e=t.toString();e.startsWith("WARNING:")||console.log(e)}clientVersion(){return"3a257bc174890aaa323ec49b0e0fc7b4"}clientUrl(){return`https://cdn.serenade.ai/client/Serenade-${this.clientVersion()}.tar.gz`}checkPort(t){let e=!0,n=s.createServer();n.once("error",t=>{"EADDRINUSE"===t.code&&(e=!1)}),n.once("listening",function(){n.close()}),setTimeout(()=>{t(e)},100),n.listen(17373)}downloadAndDecompress(t,e,n,i,s){let h=!0;const d=`${this.settings.path()}/${n}`;let f=c.dirname(d);if(r.existsSync(`${f}/${e}`))return void(s&&s());l.sync(f),a.sync(f);const p=r.createWriteStream(d);o.get(t,t=>{let e=0;const n=t.headers["content-length"];let o=0;void 0!==n&&(o=parseInt(n,10)),t.on("data",t=>{e+=t.length,h&&(this.state.set("status",`${i} (${Math.min(100,Math.floor(100*e/o))}%)\n`),h=!1,setTimeout(()=>{h=!0},500))}),t.pipe(p),p.on("finish",()=>{u.decompress({src:d,dest:f},t=>{r.unlinkSync(d),s&&s()})})})}installAndRun(t){this.settings.get("disable_autostart")?t():this.installJdk(()=>{this.installClient(()=>{this.checkPort(e=>{e?(this.clientProcess=i.spawn(this.javaBinary(),["--add-opens=java.base/java.nio=ALL-UNNAMED","--add-opens=java.base/java.lang=ALL-UNNAMED",'-Dapple.awt.UIElement="true"',"-jar",`"${this.settings.path()}/client/${this.clientVersion()}/serenade.jar"`],{cwd:`${this.settings.path()}/jdk/${this.jdkVersion()}/${this.javaPath()}`,shell:!0}),this.clientProcess.stdout.on("data",this.log),this.clientProcess.stderr.on("data",this.log),t()):t()})})})}installClient(t){this.downloadAndDecompress(this.clientUrl(),this.clientVersion(),"client/serenade.tar.gz","Updating",t)}installJdk(t){this.downloadAndDecompress(this.jdkUrl(),this.jdkVersion(),"jdk/jdk.tar.gz","Installing",t)}kill(){this.clientProcess&&h(this.clientProcess.pid)}}},function(t,e,n){var i=n(1),r=n(0),s=parseInt("0777",8);function o(t,e,n,a){"function"==typeof e?(n=e,e={}):e&&"object"==typeof e||(e={mode:e});var c=e.mode,l=e.fs||r;void 0===c&&(c=s&~process.umask()),a||(a=null);var u=n||function(){};t=i.resolve(t),l.mkdir(t,c,function(n){if(!n)return u(null,a=a||t);switch(n.code){case"ENOENT":o(i.dirname(t),e,function(n,i){n?u(n,i):o(t,e,u,i)});break;default:l.stat(t,function(t,e){t||!e.isDirectory()?u(n,a):u(null,a)})}})}t.exports=o.mkdirp=o.mkdirP=o,o.sync=function t(e,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||r;void 0===a&&(a=s&~process.umask()),o||(o=null),e=i.resolve(e);try{c.mkdirSync(e,a),o=o||e}catch(r){switch(r.code){case"ENOENT":o=t(i.dirname(e),n,o),t(e,n,o);break;default:var l;try{l=c.statSync(e)}catch(t){throw r}if(!l.isDirectory())throw r}}return o}},function(t,e){t.exports=require("assert")},function(t,e,n){t.exports=p,p.Minimatch=g;var i={sep:"/"};try{i=n(1)}catch(t){}var r=p.GLOBSTAR=g.GLOBSTAR={},s=n(53),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",l="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",u="(?:(?!(?:\\/|^)\\.).)*?",h="().*{}+?[]^$\\!".split("").reduce(function(t,e){return t[e]=!0,t},{});var d=/\/+/;function f(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function p(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new g(e,n).match(t))}function g(t,e){if(!(this instanceof g))return new g(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==i.sep&&(t=t.split(i.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function v(t,e){if(e||(e=this instanceof g?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:s(t)}p.filter=function(t,e){return e=e||{},function(n,i,r){return p(n,t,e)}},p.defaults=function(t){if(!t||!Object.keys(t).length)return p;var e=p,n=function(n,i,r){return e.minimatch(n,i,f(t,r))};return n.Minimatch=function(n,i){return new e.Minimatch(n,f(t,i))},n},g.defaults=function(t){return t&&Object.keys(t).length?p.defaults(t).Minimatch:g},g.prototype.debug=function(){},g.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map(function(t){return t.split(d)}),this.debug(this.pattern,n),n=n.map(function(t,e,n){return t.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(t){return-1===t.indexOf(!1)}),this.debug(this.pattern,n),this.set=n},g.prototype.parseNegate=function(){var t=this.pattern,e=!1,n=this.options,i=0;if(n.nonegate)return;for(var r=0,s=t.length;r<s&&"!"===t.charAt(r);r++)e=!e,i++;i&&(this.pattern=t.substr(i));this.negate=e},p.braceExpand=function(t,e){return v(t,e)},g.prototype.braceExpand=v,g.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===t)return r;if(""===t)return"";var i,s="",l=!!n.nocase,u=!1,d=[],f=[],p=!1,g=-1,v=-1,y="."===t.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function w(){if(i){switch(i){case"*":s+=c,l=!0;break;case"?":s+=a,l=!0;break;default:s+="\\"+i}b.debug("clearStateChar %j %j",i,s),i=!1}}for(var _,E=0,k=t.length;E<k&&(_=t.charAt(E));E++)if(this.debug("%s\t%s %s %j",t,E,s,_),u&&h[_])s+="\\"+_,u=!1;else switch(_){case"/":return!1;case"\\":w(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,E,s,_),p){this.debug("  in class"),"!"===_&&E===v+1&&(_="^"),s+=_;continue}b.debug("call clearStateChar %j",i),w(),i=_,n.noext&&w();continue;case"(":if(p){s+="(";continue}if(!i){s+="\\(";continue}d.push({type:i,start:E-1,reStart:s.length,open:o[i].open,close:o[i].close}),s+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,s),i=!1;continue;case")":if(p||!d.length){s+="\\)";continue}w(),l=!0;var x=d.pop();s+=x.close,"!"===x.type&&f.push(x),x.reEnd=s.length;continue;case"|":if(p||!d.length||u){s+="\\|",u=!1;continue}w(),s+="|";continue;case"[":if(w(),p){s+="\\"+_;continue}p=!0,v=E,g=s.length,s+=_;continue;case"]":if(E===v+1||!p){s+="\\"+_,u=!1;continue}if(p){var S=t.substring(v+1,E);try{RegExp("["+S+"]")}catch(t){var T=this.parse(S,m);s=s.substr(0,g)+"\\["+T[0]+"\\]",l=l||T[1],p=!1;continue}}l=!0,p=!1,s+=_;continue;default:w(),u?u=!1:!h[_]||"^"===_&&p||(s+="\\"),s+=_}p&&(S=t.substr(v+1),T=this.parse(S,m),s=s.substr(0,g)+"\\["+T[0],l=l||T[1]);for(x=d.pop();x;x=d.pop()){var L=s.slice(x.reStart+x.open.length);this.debug("setting tail",s,x),L=L.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(t,e,n){return n||(n="\\"),e+e+n+"|"}),this.debug("tail=%j\n   %s",L,L,x,s);var O="*"===x.type?c:"?"===x.type?a:"\\"+x.type;l=!0,s=s.slice(0,x.reStart)+O+"\\("+L}w(),u&&(s+="\\\\");var M=!1;switch(s.charAt(0)){case".":case"[":case"(":M=!0}for(var A=f.length-1;A>-1;A--){var j=f[A],P=s.slice(0,j.reStart),N=s.slice(j.reStart,j.reEnd-8),R=s.slice(j.reEnd-8,j.reEnd),D=s.slice(j.reEnd);R+=D;var I=P.split("(").length-1,C=D;for(E=0;E<I;E++)C=C.replace(/\)[+*?]?/,"");var $="";""===(D=C)&&e!==m&&($="$");var B=P+N+D+$+R;s=B}""!==s&&l&&(s="(?=.)"+s);M&&(s=y+s);if(e===m)return[s,l];if(!l)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var q=n.nocase?"i":"";try{var z=new RegExp("^"+s+"$",q)}catch(t){return new RegExp("$.")}return z._glob=t,z._src=s,z};var m={};p.makeRe=function(t,e){return new g(t,e||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?c:e.dot?l:u,i=e.nocase?"i":"",s=t.map(function(t){return t.map(function(t){return t===r?n:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src}).join("\\/")}).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(t){this.regexp=!1}return this.regexp},p.match=function(t,e,n){var i=new g(e,n=n||{});return t=t.filter(function(t){return i.match(t)}),i.options.nonull&&!t.length&&t.push(e),t},g.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"/"!==i.sep&&(t=t.split(i.sep).join("/"));t=t.split(d),this.debug(this.pattern,"split",t);var r,s,o=this.set;for(this.debug(this.pattern,"set",o),s=t.length-1;s>=0&&!(r=t[s]);s--);for(s=0;s<o.length;s++){var a=o[s],c=t;n.matchBase&&1===a.length&&(c=[r]);var l=this.matchOne(c,a,e);if(l)return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},g.prototype.matchOne=function(t,e,n){var i=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var s=0,o=0,a=t.length,c=e.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var l,u=e[o],h=t[s];if(this.debug(e,u,h),!1===u)return!1;if(u===r){this.debug("GLOBSTAR",[e,u,h]);var d=s,f=o+1;if(f===c){for(this.debug("** at the end");s<a;s++)if("."===t[s]||".."===t[s]||!i.dot&&"."===t[s].charAt(0))return!1;return!0}for(;d<a;){var p=t[d];if(this.debug("\nglobstar while",t,d,e,f,p),this.matchOne(t.slice(d),e.slice(f),n))return this.debug("globstar found match!",d,a,p),!0;if("."===p||".."===p||!i.dot&&"."===p.charAt(0)){this.debug("dot detected!",t,d,e,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!n||(this.debug("\n>>> no match, partial?",t,d,e,f),d!==a))}if("string"==typeof u?(l=i.nocase?h.toLowerCase()===u.toLowerCase():h===u,this.debug("string match",u,h,l)):(l=h.match(u),this.debug("pattern match",u,h,l)),!l)return!1}if(s===a&&o===c)return!0;if(s===a)return n;if(o===c)return s===a-1&&""===t[s];throw new Error("wtf?")}},function(t,e,n){"use strict";function i(t){return"/"===t.charAt(0)}function r(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(t),n=e[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(e[2]||i)}t.exports="win32"===process.platform?r:i,t.exports.posix=i,t.exports.win32=r},function(t,e){t.exports=require("http")},function(t,e){t.exports=require("child_process")},function(t,e,n){t.exports=b;var i=n(0),r=n(19),s=n(14),o=(s.Minimatch,n(3)),a=n(20).EventEmitter,c=n(1),l=n(13),u=n(15),h=n(57),d=n(21),f=(d.alphasort,d.alphasorti,d.setopts),p=d.ownProp,g=n(58),v=(n(2),d.childrenIgnored),m=d.isIgnored,y=n(8);function b(t,e,n){if("function"==typeof e&&(n=e,e={}),e||(e={}),e.sync){if(n)throw new TypeError("callback provided to sync glob");return h(t,e)}return new _(t,e,n)}b.sync=h;var w=b.GlobSync=h.GlobSync;function _(t,e,n){if("function"==typeof e&&(n=e,e=null),e&&e.sync){if(n)throw new TypeError("callback provided to sync glob");return new w(t,e)}if(!(this instanceof _))return new _(t,e,n);f(this,t,e),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=y(n),this.on("error",n),this.on("end",function(t){n(null,t)}));var r=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return a();for(var s=!0,o=0;o<i;o++)this._process(this.minimatch.set[o],o,!1,a);function a(){--r._processing,r._processing<=0&&(s?process.nextTick(function(){r._finish()}):r._finish())}s=!1}b.glob=b,b.hasMagic=function(t,e){var n=function(t,e){if(null===e||"object"!=typeof e)return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}({},e);n.noprocess=!0;var i=new _(t,n).minimatch.set;if(!t)return!1;if(i.length>1)return!0;for(var r=0;r<i[0].length;r++)if("string"!=typeof i[0][r])return!0;return!1},b.Glob=_,o(_,a),_.prototype._finish=function(){if(l(this instanceof _),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},_.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var e=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--t&&e._finish()}},_.prototype._realpathSet=function(t,e){var n=this.matches[t];if(!n)return e();var i=Object.keys(n),s=this,o=i.length;if(0===o)return e();var a=this.matches[t]=Object.create(null);i.forEach(function(n,i){n=s._makeAbs(n),r.realpath(n,s.realpathCache,function(i,r){i?"stat"===i.syscall?a[n]=!0:s.emit("error",i):a[r]=!0,0==--o&&(s.matches[t]=a,e())})})},_.prototype._mark=function(t){return d.mark(this,t)},_.prototype._makeAbs=function(t){return d.makeAbs(this,t)},_.prototype.abort=function(){this.aborted=!0,this.emit("abort")},_.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},_.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var n=t[e];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(e=0;e<i.length;e++){var r=i[e];this._processing--,this._process(r[0],r[1],r[2],r[3])}}}},_.prototype._process=function(t,e,n,i){if(l(this instanceof _),l("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,e,n,i]);else{for(var r,o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return void this._processSimple(t.join("/"),e,i);case 0:r=null;break;default:r=t.slice(0,o).join("/")}var a,c=t.slice(o);null===r?a=".":u(r)||u(t.join("/"))?(r&&u(r)||(r="/"+r),a=r):a=r;var h=this._makeAbs(a);if(v(this,a))return i();c[0]===s.GLOBSTAR?this._processGlobStar(r,a,h,c,e,n,i):this._processReaddir(r,a,h,c,e,n,i)}},_.prototype._processReaddir=function(t,e,n,i,r,s,o){var a=this;this._readdir(n,s,function(c,l){return a._processReaddir2(t,e,n,i,r,s,l,o)})},_.prototype._processReaddir2=function(t,e,n,i,r,s,o,a){if(!o)return a();for(var l=i[0],u=!!this.minimatch.negate,h=l._glob,d=this.dot||"."===h.charAt(0),f=[],p=0;p<o.length;p++){if("."!==(v=o[p]).charAt(0)||d)(u&&!t?!v.match(l):v.match(l))&&f.push(v)}var g=f.length;if(0===g)return a();if(1===i.length&&!this.mark&&!this.stat){this.matches[r]||(this.matches[r]=Object.create(null));for(p=0;p<g;p++){var v=f[p];t&&(v="/"!==t?t+"/"+v:t+v),"/"!==v.charAt(0)||this.nomount||(v=c.join(this.root,v)),this._emitMatch(r,v)}return a()}i.shift();for(p=0;p<g;p++){v=f[p];t&&(v="/"!==t?t+"/"+v:t+v),this._process([v].concat(i),r,s,a)}a()},_.prototype._emitMatch=function(t,e){if(!this.aborted&&!m(this,e))if(this.paused)this._emitQueue.push([t,e]);else{var n=u(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[t][e]=!0;var r=this.statCache[n];r&&this.emit("stat",e,r),this.emit("match",e)}}},_.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var n=this,r=g("lstat\0"+t,function(i,r){if(i&&"ENOENT"===i.code)return e();var s=r&&r.isSymbolicLink();n.symlinks[t]=s,s||!r||r.isDirectory()?n._readdir(t,!1,e):(n.cache[t]="FILE",e())});r&&i.lstat(t,r)}},_.prototype._readdir=function(t,e,n){if(!this.aborted&&(n=g("readdir\0"+t+"\0"+e,n))){if(e&&!p(this.symlinks,t))return this._readdirInGlobStar(t,n);if(p(this.cache,t)){var r=this.cache[t];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}i.readdir(t,function(t,e,n){return function(i,r){i?t._readdirError(e,i,n):t._readdirEntries(e,r,n)}}(this,t,n))}},_.prototype._readdirEntries=function(t,e,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<e.length;i++){var r=e[i];r="/"===t?t+r:t+"/"+r,this.cache[r]=!0}return this.cache[t]=e,n(null,e)}},_.prototype._readdirError=function(t,e,n){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(t);if(this.cache[i]="FILE",i===this.cwdAbs){var r=new Error(e.code+" invalid cwd "+this.cwd);r.path=this.cwd,r.code=e.code,this.emit("error",r),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e)}return n()}},_.prototype._processGlobStar=function(t,e,n,i,r,s,o){var a=this;this._readdir(n,s,function(c,l){a._processGlobStar2(t,e,n,i,r,s,l,o)})},_.prototype._processGlobStar2=function(t,e,n,i,r,s,o,a){if(!o)return a();var c=i.slice(1),l=t?[t]:[],u=l.concat(c);this._process(u,r,!1,a);var h=this.symlinks[n],d=o.length;if(h&&s)return a();for(var f=0;f<d;f++){if("."!==o[f].charAt(0)||this.dot){var p=l.concat(o[f],c);this._process(p,r,!0,a);var g=l.concat(o[f],i);this._process(g,r,!0,a)}}a()},_.prototype._processSimple=function(t,e,n){var i=this;this._stat(t,function(r,s){i._processSimple2(t,e,r,s,n)})},_.prototype._processSimple2=function(t,e,n,i,r){if(this.matches[e]||(this.matches[e]=Object.create(null)),!i)return r();if(t&&u(t)&&!this.nomount){var s=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=c.join(this.root,t):(t=c.resolve(this.root,t),s&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),r()},_.prototype._stat=function(t,e){var n=this._makeAbs(t),r="/"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&p(this.cache,n)){var s=this.cache[n];if(Array.isArray(s)&&(s="DIR"),!r||"DIR"===s)return e(null,s);if(r&&"FILE"===s)return e()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return e(null,o);var a=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===a?e():e(null,a,o)}var c=this,l=g("stat\0"+n,function(r,s){if(s&&s.isSymbolicLink())return i.stat(n,function(i,r){i?c._stat2(t,n,null,s,e):c._stat2(t,n,i,r,e)});c._stat2(t,n,r,s,e)});l&&i.lstat(n,l)},_.prototype._stat2=function(t,e,n,i,r){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[e]=!1,r();var s="/"===t.slice(-1);if(this.statCache[e]=i,"/"===e.slice(-1)&&i&&!i.isDirectory())return r(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,s&&"FILE"===o?r():r(null,o,i)}},function(t,e,n){t.exports=u,u.realpath=u,u.sync=h,u.realpathSync=h,u.monkeypatch=function(){i.realpath=u,i.realpathSync=h},u.unmonkeypatch=function(){i.realpath=r,i.realpathSync=s};var i=n(0),r=i.realpath,s=i.realpathSync,o=process.version,a=/^v[0-5]\./.test(o),c=n(52);function l(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function u(t,e,n){if(a)return r(t,e,n);"function"==typeof e&&(n=e,e=null),r(t,e,function(i,r){l(i)?c.realpath(t,e,n):n(i,r)})}function h(t,e){if(a)return s(t,e);try{return s(t,e)}catch(n){if(l(n))return c.realpathSync(t,e);throw n}}},function(t,e){t.exports=require("events")},function(t,e,n){function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.alphasort=l,e.alphasorti=c,e.setopts=function(t,e,n){n||(n={});if(n.matchBase&&-1===e.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!n.silent,t.pattern=e,t.strict=!1!==n.strict,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0);t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),function(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]);t.ignore.length&&(t.ignore=t.ignore.map(u))}(t,n),t.changedCwd=!1;var s=process.cwd();i(n,"cwd")?(t.cwd=r.resolve(n.cwd),t.changedCwd=t.cwd!==s):t.cwd=s;t.root=n.root||r.resolve(t.cwd,"/"),t.root=r.resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/"));t.cwdAbs=o(t.cwd)?t.cwd:h(t,t.cwd),"win32"===process.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/"));t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,t.minimatch=new a(e,n),t.options=t.minimatch.options},e.ownProp=i,e.makeAbs=h,e.finish=function(t){for(var e=t.nounique,n=e?[]:Object.create(null),i=0,r=t.matches.length;i<r;i++){var s=t.matches[i];if(s&&0!==Object.keys(s).length){var o=Object.keys(s);e?n.push.apply(n,o):o.forEach(function(t){n[t]=!0})}else if(t.nonull){var a=t.minimatch.globSet[i];e?n.push(a):n[a]=!0}}e||(n=Object.keys(n));t.nosort||(n=n.sort(t.nocase?c:l));if(t.mark){for(var i=0;i<n.length;i++)n[i]=t._mark(n[i]);t.nodir&&(n=n.filter(function(e){var n=!/\/$/.test(e),i=t.cache[e]||t.cache[h(t,e)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n}))}t.ignore.length&&(n=n.filter(function(e){return!d(t,e)}));t.found=n},e.mark=function(t,e){var n=h(t,e),i=t.cache[n],r=e;if(i){var s="DIR"===i||Array.isArray(i),o="/"===e.slice(-1);if(s&&!o?r+="/":!s&&o&&(r=r.slice(0,-1)),r!==e){var a=h(t,r);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return r},e.isIgnored=d,e.childrenIgnored=function(t,e){return!!t.ignore.length&&t.ignore.some(function(t){return!(!t.gmatcher||!t.gmatcher.match(e))})};var r=n(1),s=n(14),o=n(15),a=s.Minimatch;function c(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function l(t,e){return t.localeCompare(e)}function u(t){var e=null;if("/**"===t.slice(-3)){var n=t.replace(/(\/\*\*)+$/,"");e=new a(n,{dot:!0})}return{matcher:new a(t,{dot:!0}),gmatcher:e}}function h(t,e){var n=e;return n="/"===e.charAt(0)?r.join(t.root,e):o(e)||""===e?e:t.changedCwd?r.resolve(t.cwd,e):r.resolve(e),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function d(t,e){return!!t.ignore.length&&t.ignore.some(function(t){return t.matcher.match(e)||!(!t.gmatcher||!t.gmatcher.match(e))})}},function(t,e){t.exports=function t(e,n){if(e&&n)return t(e)(n);if("function"!=typeof e)throw new TypeError("need wrapper function");Object.keys(e).forEach(function(t){i[t]=e[t]});return i;function i(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var i=e.apply(this,t),r=t[t.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach(function(t){i[t]=r[t]}),i}}},function(t,e){t.exports=require("stream")},function(t,e,n){"use strict";var i=n(9);t.exports=y;var r,s=n(67);y.ReadableState=m;n(20).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=n(25),c=n(6).Buffer,l=global.Uint8Array||function(){};var u=n(7);u.inherits=n(3);var h=n(2),d=void 0;d=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p=n(69),g=n(26);u.inherits(y,a);var v=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var i=e instanceof(r=r||n(4));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:i&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=n(28).StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function y(t){if(r=r||n(4),!(this instanceof y))return new y(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function b(t,e,n,i,r){var s,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,k(t)}(t,o)):(r||(s=function(t,e){var n;i=e,c.isBuffer(i)||i instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),i?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?w(t,o,e,!1):S(t,o)):w(t,o,e,!1))):i||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function w(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),S(t,e)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.push(null),e(t)},y.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=c.from(t,e),e=""),n=!0),b(this,t,e,!1,n)},y.prototype.unshift=function(t){return b(this,t,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return f||(f=n(28).StringDecoder),this._readableState.decoder=new f(t),this._readableState.encoding=t,this};var _=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=_?t=_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(x,t):x(t))}function x(t){d("emit readable"),t.emit("readable"),M(t)}function S(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function L(t){d("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function A(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?r+=s:r+=s.slice(0,t),0===(t-=o)){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++i}return e.length-=i,r}(t,e):function(t,e){var n=c.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),0===(t-=o)){o===s.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(o));break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function j(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}y.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):k(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&j(this),null;var i,r=e.needReadable;return d("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",r=!0),e.ended||e.reading?d("reading or ended",r=!1):r&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(i=t>0?A(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==i&&this.emit("data",i),i},y.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,d("pipe count=%d opts=%j",r.pipesCount,e);var a=(!e||!1!==e.end)&&t!==process.stdout&&t!==process.stderr?l:y;function c(e,i){d("onunpipe"),e===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,d("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",u),t.removeListener("error",g),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",p),h=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}function l(){d("onend"),t.end()}r.endEmitted?i.nextTick(a):n.once("end",a),t.on("unpipe",c);var u=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,M(t))}}(n);t.on("drain",u);var h=!1;var f=!1;function p(e){d("ondata"),f=!1,!1!==t.write(e)||f||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==N(r.pipes,t))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function g(e){d("onerror",e),y(),t.removeListener("error",g),0===o(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),y()}function m(){d("onfinish"),t.removeListener("close",v),y()}function y(){d("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",v),t.once("finish",m),t.emit("pipe",n),r.flowing||(d("pipe resume"),n.resume()),t},y.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,n);return this}var o=N(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},y.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):i.nextTick(L,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(O,t,e))}(this,t)),this},y.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(t){var e=this,n=this._readableState,i=!1;for(var r in t.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(d("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(e.push(r)||(i=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var s=0;s<v.length;s++)t.on(v[s],this.emit.bind(this,v[s]));return this._read=function(e){d("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=A},function(t,e,n){t.exports=n(23)},function(t,e,n){"use strict";var i=n(9);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var i=n(9);function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,o=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:i.nextTick;v.WritableState=g;var a=n(7);a.inherits=n(3);var c={deprecate:n(70)},l=n(25),u=n(6).Buffer,h=global.Uint8Array||function(){};var d,f=n(26);function p(){}function g(t,e){s=s||n(4),t=t||{};var a=e instanceof s;this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var c=t.highWaterMark,l=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:a&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,s=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,s){--e.pendingcb,n?(i.nextTick(s,r),i.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(s(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,s);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(t,n),r?o(y,t,n,a,s):y(t,n,a,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function v(t){if(s=s||n(4),!(d.call(v,this)||this instanceof s))return new v(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function m(t,e,n,i,r,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,s,e.onwrite),e.sync=!1}function y(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),E(t,e)}function b(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,s=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)s[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;s.allBuffers=c,m(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,h=n.callback;if(m(t,e,!1,e.objectMode?1:l.length,l,u,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function E(t,e){var n=w(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,i.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}a.inherits(v,l),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,s=this._writableState,o=!1,a=!s.objectMode&&(r=t,u.isBuffer(r)||r instanceof h);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof n&&(n=p),s.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),i.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var s=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),i.nextTick(r,o),s=!1),s}(this,s,t,n))&&(s.pendingcb++,o=function(t,e,n,i,r,s){if(!n){var o=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n));return e}(e,i,r);i!==o&&(n=!0,r="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,a,i,r,s);return c}(this,s,a,t,e,n)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=f.destroy,v.prototype._undestroy=f.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}},function(t,e,n){"use strict";var i=n(6).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},s.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=o(e[i]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=o(e[i]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=o(e[i]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var i=n(4),r=n(7);function s(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){c(t,e,n)}):c(this,null,null)}function c(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(3),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var i=n(31),r=n(32),s="0".charCodeAt(0),o=parseInt("7777",8),a=function(t,e,n,i){for(;n<i;n++)if(t[n]===e)return n;return i},c=function(t){for(var e=256,n=0;n<148;n++)e+=t[n];for(var i=156;i<512;i++)e+=t[i];return e},l=function(t,e){return(t=t.toString(8)).length>e?"7777777777777777777".slice(0,e)+" ":"0000000000000000000".slice(0,e-t.length)+t+" "};var u=function(t,e,n){if(128&(t=t.slice(e,e+n))[e=0])return function(t){var e;if(128===t[0])e=!0;else{if(255!==t[0])return null;e=!1}for(var n=!1,i=[],r=t.length-1;r>0;r--){var s=t[r];e?i.push(s):n&&0===s?i.push(0):n?(n=!1,i.push(256-s)):i.push(255-s)}var o=0,a=i.length;for(r=0;r<a;r++)o+=i[r]*Math.pow(256,r);return e?o:-1*o}(t);for(;e<t.length&&32===t[e];)e++;for(var i=(r=a(t,32,e,t.length),s=t.length,o=t.length,"number"!=typeof r?o:(r=~~r)>=s?s:r>=0?r:(r+=s)>=0?r:0);e<i&&0===t[e];)e++;return i===e?0:parseInt(t.slice(e,i).toString(),8);var r,s,o},h=function(t,e,n,i){return t.slice(e,a(t,0,e,e+n)).toString(i)},d=function(t){var e=Buffer.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t};e.decodeLongPath=function(t,e){return h(t,0,t.length,e)},e.encodePax=function(t){var e="";t.name&&(e+=d(" path="+t.name+"\n")),t.linkname&&(e+=d(" linkpath="+t.linkname+"\n"));var n=t.pax;if(n)for(var r in n)e+=d(" "+r+"="+n[r]+"\n");return i(e)},e.decodePax=function(t){for(var e={};t.length;){for(var n=0;n<t.length&&32!==t[n];)n++;var i=parseInt(t.slice(0,n).toString(),10);if(!i)return e;var r=t.slice(n+1,i-1).toString(),s=r.indexOf("=");if(-1===s)return e;e[r.slice(0,s)]=r.slice(s+1),t=t.slice(i)}return e},e.encode=function(t){var e=r(512),n=t.name,i="";if(5===t.typeflag&&"/"!==n[n.length-1]&&(n+="/"),Buffer.byteLength(n)!==n.length)return null;for(;Buffer.byteLength(n)>100;){var a=n.indexOf("/");if(-1===a)return null;i+=i?"/"+n.slice(0,a):n.slice(0,a),n=n.slice(a+1)}return Buffer.byteLength(n)>100||Buffer.byteLength(i)>155?null:t.linkname&&Buffer.byteLength(t.linkname)>100?null:(e.write(n),e.write(l(t.mode&o,6),100),e.write(l(t.uid,6),108),e.write(l(t.gid,6),116),e.write(l(t.size,11),124),e.write(l(t.mtime.getTime()/1e3|0,11),136),e[156]=s+function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(t.type),t.linkname&&e.write(t.linkname,157),e.write("ustar\x0000",257),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(l(t.devmajor||0,6),329),e.write(l(t.devminor||0,6),337),i&&e.write(i,345),e.write(l(c(e),6),148),e)},e.decode=function(t,e){var n=0===t[156]?0:t[156]-s,i=h(t,0,100,e),r=u(t,100,8),o=u(t,108,8),a=u(t,116,8),l=u(t,124,12),d=u(t,136,12),f=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(n),p=0===t[157]?null:h(t,157,100,e),g=h(t,265,32),v=h(t,297,32),m=u(t,329,8),y=u(t,337,8);t[345]&&(i=h(t,345,155,e)+"/"+i),0===n&&i&&"/"===i[i.length-1]&&(n=5);var b=c(t);if(256===b)return null;if(b!==u(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");return{name:i,mode:r,uid:o,gid:a,size:l,mtime:new Date(1e3*d),type:f,linkname:p,uname:g,gname:v,devmajor:m,devminor:y}}},function(t,e){t.exports=function(t,e){if(Buffer.isBuffer(t))return t;if("string"==typeof t)return n(t,e);if(Array.isArray(t))return n(t);throw new Error("Input should be a buffer or a string")};var n=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from:function(t,e){return new Buffer(t,e)}},function(t,e,n){var i=n(73),r=n(74);t.exports=function(t,e,n){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(t,e,n);var s=r(t);return 0===t?s:void 0===e?i(s,0):("string"!=typeof n&&(n=void 0),i(s,e,n))}},function(t,e,n){var i=n(8),r=function(){},s=function(t,e,n){if("function"==typeof e)return s(t,null,e);e||(e={}),n=i(n||r);var o=t._writableState,a=t._readableState,c=e.readable||!1!==e.readable&&t.readable,l=e.writable||!1!==e.writable&&t.writable,u=function(){t.writable||h()},h=function(){l=!1,c||n.call(t)},d=function(){c=!1,l||n.call(t)},f=function(e){n.call(t,e?new Error("exited with error code: "+e):null)},p=function(e){n.call(t,e)},g=function(){return(!c||a&&a.ended)&&(!l||o&&o.ended)?void 0:n.call(t,new Error("premature close"))},v=function(){t.req.on("finish",h)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(t)?l&&!o&&(t.on("end",u),t.on("close",u)):(t.on("complete",h),t.on("abort",g),t.req?v():t.on("request",v)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",f),t.on("end",d),t.on("finish",h),!1!==e.error&&t.on("error",p),t.on("close",g),function(){t.removeListener("complete",h),t.removeListener("abort",g),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("exit",f),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",g)}};t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=new(n(35).default);e.activate=function(t){i.activate()},e.deactivate=function(){i.deactivate()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(36),r=n(37),s=n(41),o=n(43),a=n(44),c=n(45),l=n(47),u=n(48),h=n(84),d=n(85),f=n(86);e.default=class extends l.default{activate(){this.initialize(),this.subscriptions=new i.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"serenade:initialize":()=>this.initialize(),"serenade:show-transcript-input":()=>this.showTranscriptInput(),"serenade:restart":()=>this.restart()}))}deactivate(){this.destroy(),this.subscriptions.dispose()}initialize(){if(this.ipc)return;this.state=new d.default,this.settings=new h.default,this.clientRunner=new u.default(this.state,this.settings).get(),new a.default(this.state);const t=new o.default(this,this.state,this.settings);this.ipc=new c.default(this,this.state,t,this.clientRunner);const e=new r.default(this.state,this.ipc,this.settings,new s.default);this.transcriptInputView=new f.default(this,this.ipc),e.initialize(),this.run()}focusEditor(){void 0!==this.currentEditor&&atom.workspace.paneForItem(this.currentEditor).activate()}restart(){this.clientRunner.kill(),this.clientRunner.installAndRun(()=>{})}showTranscriptInput(){this.initialize(),this.setCurrentEditor(),this.transcriptInputView.show()}setCurrentEditor(){this.currentEditor=atom.workspace.getActiveTextEditor()}}},function(t,e){t.exports=require("atom")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(38);e.default=class extends i.default{constructor(t,e,n,i){super(),this.state=t,this.ipc=e,this.settings=n,this.alternativesPanel=i}$(t){return this.container.querySelector(t)}$$(t){return this.container.querySelectorAll(t)}addComputedStyleElement(t){this.container.appendChild(t)}initialize(){this.createPanel(),this.state.subscribe("alternatives",(t,e)=>{this.onAlternatives(t,e)}),this.state.subscribe("appState",(t,e)=>{this.onAppState(t,e)}),this.state.subscribe("highlighted",(t,e)=>{this.onHighlighted(t,e)}),this.state.subscribe("listening",(t,e)=>{this.onListening(t,e)}),this.state.subscribe("loading",(t,e)=>{this.onLoading(t,e)}),this.state.subscribe("loginError",(t,e)=>{this.onLoginError(t,e)}),this.state.subscribe("nuxCompleted",(t,e)=>{this.onNuxCompleted(t,e)}),this.state.subscribe("nuxStep",(t,e)=>{this.onNuxStep(t,e)}),this.state.subscribe("status",(t,e)=>{this.onStatus(t,e)}),this.state.subscribe("volume",(t,e)=>{this.onVolume(t,e)}),super.initialize()}createPanel(){this.container=document.createElement("div"),this.container.innerHTML=this.alternativesPanel.html(),this.$(".input-login-email").getModel().setPlaceholderText("Email"),this.$(".input-login-password").getModel().setPlaceholderText("Password"),this.$(".input-register-name").getModel().setPlaceholderText("Full name"),this.$(".input-register-email").getModel().setPlaceholderText("Email"),this.$(".input-register-password").getModel().setPlaceholderText("Password"),this.panel=atom.workspace.addRightPanel({item:this.container,visible:!1}),this.panel.show()}getLoginFields(){return{email:this.$(".input-login-email").getModel().getText(),password:this.$(".input-login-password").getModel().getText()}}getRegisterFields(){return{name:this.$(".input-register-name").getModel().getText(),email:this.$(".input-register-email").getModel().getText(),password:this.$(".input-register-password").getModel().getText()}}getState(t){return this.state.get(t)}sendIPC(t,e){this.ipc.send(t,e)}setState(t,e){this.state.set(t,e)}setupLoginEvents(){this.$(".input-login-email").addEventListener("keyup",t=>{13===t.which&&this.login()}),this.$(".input-login-password").addEventListener("keyup",t=>{13===t.which&&this.login()}),this.$(".btn-login").addEventListener("click",()=>{this.login()})}setupRegisterEvents(){this.$(".input-register-name").addEventListener("keyup",t=>{13===t.which&&this.register()}),this.$(".input-register-email").addEventListener("keyup",t=>{13===t.which&&this.register()}),this.$(".input-register-password").addEventListener("keyup",t=>{13===t.which&&this.register()}),this.$(".btn-register").addEventListener("click",()=>{this.register()})}showDocsPanel(t){const e=this.getState("docs");this.setState("docs",e!==t&&t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(39),r=n(40);e.default=class{$(t){return document.querySelector(t)}$$(t){return document.querySelectorAll(t)}alternativeRows(t,e){let n=1;return t.map(t=>{let i="",r=n.toString();if(t.sequences&&1===t.sequences.length&&t.sequences[0].commands&&1===t.sequences[0].commands.length&&"COMMAND_TYPE_INVALID"===t.sequences[0].commands[0].type){if(r="&times",i="invalid",e.validOnly)return null}else if(n++,e.invalidOnly)return null;let s=t.sequences.some(t=>t.commands.some(t=>"COMMAND_TYPE_SNIPPET_EXECUTED"===t.type)),o=t.description.replace(/<code>([\s\S]+)<\/code>/g,(t,n)=>n.includes("\n")||s?(s=!0,`<div class="alternative-code"><pre>${this.escapeText(n)}</pre></div>`):(e&&e.truncate&&(n=this.truncate(n,e.truncate)),` <pre class="inline">${this.escapeText(n)}</pre>`));return`\n    <a class="alternative-row ${i} ${s?"has-newline":""}" data-index="${r}">\n        <div class="alternative-number">${r}</div>\n        <div class="alternative-description">${o}</div>\n    </a>`}).filter(t=>null!==t)}escapeText(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):t}initialize(){this.$(".btn-pre-login").addEventListener("click",()=>{this.$(".alternatives-login").classList.remove("hidden"),this.$(".alternatives-register").classList.add("hidden"),this.$(".alternatives-pre-login-buttons").classList.add("hidden")}),this.$$(".btn-pre-register").forEach(t=>{t.addEventListener("click",()=>{this.$(".alternatives-register").classList.remove("hidden"),this.$(".alternatives-login").classList.add("hidden"),this.$(".alternatives-pre-login-buttons").classList.add("hidden")})}),this.$(".btn-menu").addEventListener("click",()=>{this.$(".btn-menu i").classList.toggle("active");let t=this.$(".menu-dropdown");t.classList.contains("active")?(t.classList.toggle("active"),setTimeout(()=>{t.classList.add("hidden")},200)):(t.classList.remove("hidden"),setTimeout(()=>{t.classList.toggle("active")},1))}),this.$(".btn-listen").addEventListener("click",()=>{this.setState("listening",!this.getState("listening"))}),this.$(".btn-guide").addEventListener("click",()=>{this.showDocsPanel("https://docs.serenade.ai")}),this.$(".btn-reference").addEventListener("click",()=>{this.showDocsPanel("https://docs.serenade.ai/docs/reference.html")}),this.$(".btn-clear").addEventListener("click",()=>{this.sendIPC("SEND_TEXT",{text:"cancel"})}),this.$(".alternatives-valid-list").addEventListener("click",t=>{const e=t.target.closest(".alternative-row");if(e.classList.contains("suggestion"))return;const n=e.getAttribute("data-index");this.sendIPC("SEND_TEXT",{text:`use ${n}`})}),this.$(".alternatives-valid-list").addEventListener("mouseover",t=>{const e=t.target.closest(".alternative-row");null!=e&&e.classList.add("success-color-light")}),this.$(".alternatives-valid-list").addEventListener("mouseout",t=>{const e=t.target.closest(".alternative-row");null==e||e.classList.contains("highlighted")||e.classList.remove("success-color-light")}),this.setupLoginEvents(),this.setupRegisterEvents();const t=getComputedStyle(this.$(".success-color"))["background-color"].match(/\d+/g);this.$(".success-color").style.display="none";let e=document.createElement("style");this.addComputedStyleElement(e),e.sheet.insertRule(`.success-color-light { background: rgba(${t[0]}, ${t[1]}, ${t[2]}, 0.4); }`,0)}login(){this.$(".btn-login .lds-ring").classList.remove("hidden"),this.$(".btn-login").setAttribute("disabled","true"),this.sendIPC("AUTHENTICATE",this.getLoginFields())}onAlternatives(t,e){if("alternatives"in t){let e="";0===t.alternatives.length?"files"===t.alternativeType&&(e="No matching files found"):t.alternatives.length>1&&(e="Did you mean");const n=this.alternativeRows(t.alternatives,{truncate:"files"===t.alternativeType?50:void 0,validOnly:!0}),i=this.$(".alternatives-valid");n.length>0?(i.classList.remove("hidden"),this.$(".alternatives-valid-header").innerHTML="files"===t.alternativeType?"Select a file":"Select a command",this.$(".alternatives-valid-list").innerHTML=n.join("")):i.classList.add("hidden");const r=this.alternativeRows(t.alternatives,{invalidOnly:!0}),s=this.$(".alternatives-invalid");r.length>0?(s.classList.remove("hidden"),this.$(".alternatives-invalid-header").innerHTML="Invalid commands",this.$(".alternatives-invalid-list").innerHTML=r.join("")):s.classList.add("hidden")}else if(t.suggestions||!e||e&&"alternatives"in e){const t=this.getState("nuxCompleted");this.$(".alternatives-valid").classList.remove("hidden"),this.$(".alternatives-valid-header").innerHTML=t?"Try saying":"",this.$(".alternatives-valid-list").innerHTML=t?r.random(5):"",this.$(".alternatives-invalid").classList.add("hidden"),this.$(".alternatives-invalid-header").innerHTML="",this.$(".alternatives-invalid-list").innerHTML=""}}onAppState(t,e){this.$(".alternatives-panel").classList.remove("hidden");const n=this.$(".alternatives-login-container"),i=this.$(".alternatives-volume-container"),r=this.$(".alternatives-list-container"),s=this.$(".nux");"LOADING"===t?(n.classList.add("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),s.classList.add("hidden")):"LOGIN_FORM"===t?(n.classList.remove("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),s.classList.add("hidden"),this.$(".alternatives-status").innerHTML=""):"READY"===t&&(n.classList.add("hidden"),i.classList.remove("hidden"),r.classList.remove("hidden"),this.setState("status","Paused"),this.getState("nuxCompleted")||s.classList.remove("hidden"))}onHighlighted(t,e){if(!("alternatives"in this.getState("alternatives")))return;const n=this.$$(".alternatives-valid-list .alternative-row:not(.invalid)");t<n.length&&(this.$(".alternatives-valid-header").innerHTML="Ran command",n[t].classList.add("success-color-light"),n[t].classList.add("highlighted"))}onListening(t,e){this.$(".btn-listen").innerHTML=t?"Pause":"Listen",t?this.$(".listening-indicator").classList.remove("hidden"):this.$(".listening-indicator").classList.add("hidden")}onLoading(t,e){t&&(this.$(".alternatives-valid-header").innerHTML='<div class="lds-ring"><div></div><div></div><div></div><div></div></div>Loading...')}onLoginError(t,e){this.$(".btn-login").removeAttribute("disabled"),this.$(".btn-login .lds-ring").classList.add("hidden"),this.$(".btn-register").removeAttribute("disabled"),this.$(".btn-register .lds-ring").classList.add("hidden"),this.$$(".login-error").forEach(e=>{e.classList.remove("hidden"),e.innerHTML=t})}onNuxCompleted(t,e){t?this.$(".nux").classList.add("hidden"):(this.setState("nuxStep",0),this.$(".nux").classList.remove("hidden"),this.$(".btn-nux-next").addEventListener("click",()=>{const t=this.getState("nuxStep");t<i.steps().length-1?this.setState("nuxStep",t+1):(this.setState("nuxCompleted",!0),this.setState("alternatives",{suggestions:!0}))}),this.$(".btn-nux-back").addEventListener("click",()=>{const t=this.getState("nuxStep");t>0&&this.setState("nuxStep",t-1)}))}onNuxStep(t,e){const n=i.steps(),r=n[t];this.$(".btn-nux-next").innerHTML=t===n.length-1?"Close":"Next &rsaquo;",this.$(".nux-progress").style.width=Math.ceil(t/(n.length-1)*100)+"%",this.$(".nux-heading").innerHTML=r.title,this.$(".nux-body").innerHTML=r.body;const s=this.$(".btn-nux-back");0==t?s.classList.add("hidden"):s.classList.remove("hidden")}onStatus(t,e){this.$(".alternatives-status").innerHTML=t}onVolume(t,e){this.$(".alternatives-bar").style.width=(t||0)+"%"}register(){this.$(".btn-register .lds-ring").classList.remove("hidden"),this.$(".btn-register").setAttribute("disabled","true"),this.sendIPC("REGISTER",this.getRegisterFields())}truncate(t,e){return t.length<=e?t:(e-="...".length,e=Math.floor(e/2),t.substr(0,e)+"..."+t.substr(t.length-e))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.steps=function(){return[{title:"Welcome to Serenade!",body:"<p>This guide will walk you through an introduction to Serenade.</p>"},{title:"Setup",body:"<p>You should keep Serenade open in a panel that's side-by-side with the code you're editing, since you'll need to see what's displayed here.</p>"},{title:"Tabs and alternatives",body:'<p>Start by pressing the Listen button above. Now, say "new tab" to create a new tab.</p><p>You might see a list of alternatives appear on screen. This list appears when Serenade isn\'t exactly sure what you said. When it appears, you can say "clear" to clear the list and start over, continue speaking a command, or say "use" followed by the number you want to select, like "use one" or "use three".</p>'},{title:"Save",body:'<p>Now, let\'s write some Python. First, say "save" to invoke the save dialog, then save the file as hello.py.</p>'},{title:"Add import",body:'<p>Try saying "add import random" to add an import statement. Remember, you\'ll need to say "use one" in order to run the command, or "clear" to try again.</p>'},{title:"Undo",body:'<p>If you accidentally select the wrong alternative, you can always say "undo" to go back. "redo" also works.</p>'},{title:"Add function",body:'<p>Next, create a function by saying "add function get random", followed by a "use" command.</p>'},{title:"Add parameter",body:'<p>You can add a parameter called "number" to your function by saying "add parameter number", followed by a "use" command.</p>'},{title:"Add return",body:'<p>Let\'s give the function a body. Say "add return 4" to add a return statement.</p>'},{title:"Cursor movement",body:'<p>You can move around the cursor with commands like "up", "next line", or "line one". Try saying "line one".</p>'},{title:"Deletion",body:'<p>Now, to delete the import statement you added earlier, try saying "delete line".</p>'},{title:"Learn more",body:'<p>That\'s it for our introduction! As a next step, take a look at the <a href="https://docs.serenade.ai">Serenade guide</a> to learn more.</p>'}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.random=function(t){let e=["new tab","next tab","previous tab","close tab","go to tab three","next word","next line","previous line","split left","split right","left window","right window","line one","copy next two words","go to phrase hello world","paste","cut function","copy class","delete if","indent line two times","indent next five lines","dedent line","save","style file","undo","redo","copy phrase foobar","change return value to 50","newline","next character","previous word","go to end of line","go to start of word","delete to end of line","delete three words","go to third character","go to second word","delete second argument","copy previous five lines","delete last four words","next class","previous function","go to return value","cut third import","type function","type pascal case hello world","type underscores hello world","type all caps hello world","add argument bar","add function called hello","add parameter foo","add class styler","add import requests","add import numpy as np","add assert false","add decorator app dot get","add return true","add if a less than three","add method init","add return","add while counter greater than zero","add try","add print hi","add function underscore get","add parent class exception","add call say with argument message"],n=[];for(let i=0;i<t;i++)n.push(e.splice(Math.floor(Math.random()*e.length),1)[0]);return n.map(t=>`\n<a class="alternative-row suggestion">\n    <div class="alternative-description">${t}</div>\n</a>\n    `).join("")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(42);e.default=class extends i.default{login(){return'\n<atom-text-editor tabindex="1" class="input-login-email" mini="true"></atom-text-editor>\n<atom-text-editor tabindex="2" class="input-login-password" mini="true"></atom-text-editor>\n<button class="btn btn-login">\n    Sign in\n    <div class="lds-ring hidden"><div></div><div></div><div></div><div></div></div>\n</button>\n<a href="#" class="btn-login-alt btn-pre-register">Or sign up for an account</a>\n        '}logo(){return'<img src="atom://serenade/images/wordmark.png" />'}register(){return'\n<atom-text-editor tabindex="1" class="input-register-name" mini="true"></atom-text-editor>\n<atom-text-editor tabindex="2" class="input-register-email" mini="true"></atom-text-editor>\n<atom-text-editor tabindex="3" class="input-register-password" mini="true"></atom-text-editor>\n<button class="btn btn-register">\n    Sign up for Serenade\n    <div class="lds-ring hidden"><div></div><div></div><div></div><div></div></div>\n</button>\n        '}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{html(){return`\n<div class="alternatives-panel hidden">\n  <div class="success-color"></div>\n  <div class="alternatives-logo-container">\n    <div class="alternatives-logo">${this.logo()}</div>\n    <div class="hidden listening-indicator"></div>\n    <div class="spacer"></div>\n    <div class="alternatives-status"></div>\n  </div>\n  <div class="alternatives-login-container">\n    <div class="alternatives-pre-login-buttons">\n      <button class="btn btn-pre-login">Sign in</button>\n      <button class="btn btn-pre-register">Sign up for Serenade</button>\n    </div>\n    <div class="alternatives-login hidden">\n      <div class="login-error hidden"></div>\n      <form class="alternatives-login-form">\n        ${this.login()}\n      </form>\n    </div>\n    <div class="alternatives-register hidden">\n      <div class="login-error hidden"></div>\n      <form class="alternatives-register-form">\n        ${this.register()}\n      </form>\n    </div>\n  </div>\n  <div class="alternatives-volume-container hidden">\n    <div class="alternatives-listen-controls">\n      <button class="btn btn-listen">Listen</button>\n      <button class="btn btn-menu">\n      <i class="fas fa-chevron-down"></i>\n      <div class="menu-dropdown hidden">\n        <a href="#" class="btn-clear">Clear</a>\n        <a href="#" class="btn-guide">Guide</a>\n        <a href="#" class="btn-reference">Reference</a>\n      </div>\n    </div>\n    </button>\n    <div class="alternatives-bar-container">\n      <div class="alternatives-bar success-color-light"></div>\n    </div>\n  </div>\n  <div class="nux hidden">\n    <div class="nux-progress success-color-light"></div>\n    <h2 class="nux-heading"></h2>\n    <div class="nux-body"></div>\n    <button class="btn btn-nux-back hidden">&lsaquo; Back</button>\n    <button class="btn btn-nux-next">Next &rsaquo;</button>\n  </div>\n  <div class="alternatives-list-container hidden">\n    <div class="alternatives-valid">\n      <div class="alternatives-valid-header"></div>\n      <div class="alternatives-valid-list"></div>\n    </div>\n    <div class="alternatives-invalid">\n      <div class="alternatives-invalid-header"></div>\n      <div class="alternatives-invalid-list"></div>\n    </div>\n  </div>\n</div>\n        `}login(){return'\n<input type="text" class="input-login-email" placeholder="Email" />\n<input type="password" class="input-login-password" placeholder="Password" />\n<button class="btn btn-login">\n    Sign in\n    <div class="lds-ring hidden"><div></div><div></div><div></div><div></div></div>\n</button>\n<a href="#" class="btn-login-alt btn-pre-register">Or sign up for an account</a>\n        '}register(){return'\n<input type="text" class="input-register-name" placeholder="Full name" />\n<input type="text" class="input-register-email" placeholder="Email" />\n<input type="password" class="input-register-password" placeholder="Password" />\n<button class="btn btn-register">\n    Sign up for Serenade\n    <div class="lds-ring hidden"><div></div><div></div><div></div><div></div></div>\n</button>\n        '}}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,a)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,n){this.pendingFiles=[],this.ignorePatternsData=null,this.app=t,this.state=e,this.settings=n}dispatch(t){let e=atom.workspace.getActivePane(),n=atom.workspace.getActiveTextEditor();n&&(e=atom.views.getView(n)),atom.commands.dispatch(e,t)}focus(){this.app.focusEditor()}ignorePatterns(){if(null==this.ignorePatternsData){let t=[],e=[];for(let n of this.settings.get("ignore"))n.endsWith("/")?t.push(n.replace(/\/+$/g,"")):e.push(n);this.ignorePatternsData={directory:new RegExp(t.join("|")),file:new RegExp(e.join("|"))}}return this.ignorePatternsData}openPendingFileAtIndex(t){t<0||t>=this.pendingFiles.length||atom.workspace.open(this.pendingFiles[t].getPath())}searchFiles(t,e){let n=new RegExp(t.toLowerCase().replace(/ /g,"(.*)"));if(e.getPath().match(this.ignorePatterns().directory))return[];let i=[],r=this.ignorePatterns().file;for(let s of e.getEntriesSync())if(s.isDirectory())i.push(...this.searchFiles(t,s));else if(s.isFile()){let t=s.getPath().toLowerCase().replace(/\/|\./g,"");!(t.search(n)>-1)||r&&t.match(r)||i.push(s)}return i}setSourceAndCursor(t,e){let n=atom.workspace.getActiveTextEditor();if(!n)return;let i=0,r=0;for(let n=0;n<e;n++)r++,"\n"==t[n]&&(i++,r=0);n.transact(()=>{n.setText(t||""),n.setCursorBufferPosition([i,r])})}uiDelay(){return i(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(()=>{t()},300)})})}COMMAND_TYPE_CANCEL(t){return i(this,void 0,void 0,function*(){this.state.set("alternatives",{suggestions:!0})})}COMMAND_TYPE_CLOSE_TAB(t){return i(this,void 0,void 0,function*(){atom.workspace.getActivePane().destroyActiveItem(),yield this.uiDelay()})}COMMAND_TYPE_CLOSE_WINDOW(t){return i(this,void 0,void 0,function*(){this.dispatch("pane:close"),yield this.uiDelay()})}COMMAND_TYPE_COPY(t){return i(this,void 0,void 0,function*(){t&&t.text&&atom.clipboard.write(t.text)})}COMMAND_TYPE_CREATE_TAB(t){return i(this,void 0,void 0,function*(){atom.workspace.open(),yield this.uiDelay()})}COMMAND_TYPE_DIFF(t){return i(this,void 0,void 0,function*(){this.setSourceAndCursor(t.source,t.cursor),this.focus()})}COMMAND_TYPE_GET_EDITOR_STATE(t){return i(this,void 0,void 0,function*(){let t={source:"",cursor:0,filename:""},e=atom.workspace.getActiveTextEditor();if(!e)return t;let n=e.getCursorBufferPosition(),i=n.row,r=n.column,s=e.getText(),o=0,a=0,c=0;for(let t=0;t<s.length;t++){if(a==i){if(c==r)break;c++}"\n"==s[t]&&a++,o++}return t.source=s,t.cursor=o,t.filename=atom.workspace.getActiveTextEditor().getPath(),t})}COMMAND_TYPE_GO_TO_DEFINITION(t){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_INVALID(t){return i(this,void 0,void 0,function*(){})}COMMAND_TYPE_LOGIN(t){return i(this,void 0,void 0,function*(){""!==t.text&&void 0!==t.text?this.state.set("appState","READY"):this.state.set("loginError","Invalid email/password.")})}COMMAND_TYPE_NEXT_TAB(t){return i(this,void 0,void 0,function*(){atom.workspace.getActivePane().activateNextItem(),yield this.uiDelay()})}COMMAND_TYPE_OPEN_FILE(t){return i(this,void 0,void 0,function*(){let e=atom.project.getPaths();e.sort((t,e)=>e.length-t.length);let n=[];for(let e of atom.project.getDirectories())n.push(...this.searchFiles(t.path,e));this.pendingFiles=n;let i=n.map(t=>{let n=t.getPath();for(let t of e)if(n.startsWith(t)){n=n.substring(t.length+1);break}return{description:`open <code>${n}</code>`}});this.state.set("alternatives",{alternatives:i,type:"files"})})}COMMAND_TYPE_PASTE(t){return i(this,void 0,void 0,function*(){let e=atom.workspace.getActiveTextEditor();if(!e)return;let n=atom.clipboard.read(),i=e.getText(),r=t.cursor||0,s=r;if(t.direction&&!n.endsWith("\n")&&(n+="\n"),n.endsWith("\n")||t.direction){if(t.direction=t.direction||"below","below"==t.direction){for(;r<i.length;r++)if("\n"==i[r]){r++;break}}else if("above"==t.direction)for("\n"==i[r]&&r>0&&r--;r>=0;r--)if("\n"==i[r]){r++;break}s=r}s+=n.length,n.endsWith("\n")&&s--,this.setSourceAndCursor(i.substring(0,r)+n+i.substring(r),s)})}COMMAND_TYPE_PAUSE(t){return i(this,void 0,void 0,function*(){this.state.set("listening",!1),this.state.set("status","Paused")})}COMMAND_TYPE_PING(t){return i(this,void 0,void 0,function*(){this.app.ipc.send("PING",{})})}COMMAND_TYPE_PREVIOUS_TAB(t){return i(this,void 0,void 0,function*(){atom.workspace.getActivePane().activatePreviousItem(),yield this.uiDelay()})}COMMAND_TYPE_REDO(t){return i(this,void 0,void 0,function*(){let t=atom.workspace.getActiveTextEditor();t&&t.redo()})}COMMAND_TYPE_SAVE(t){return i(this,void 0,void 0,function*(){let t=atom.workspace.getActiveTextEditor();if(t)if(t.getPath())t.save();else{let e=atom.applicationDelegate.showSaveDialog();e&&t.saveAs(e)}})}COMMAND_TYPE_SET_EDITOR_STATUS(t){return i(this,void 0,void 0,function*(){let e=t.text;t.volume&&this.state.set("volume",Math.floor(100*t.volume)),this.state.set("status",e)})}COMMAND_TYPE_SNIPPET(t){return i(this,void 0,void 0,function*(){this.state.set("loading",!0),this.app.ipc.send("SEND_TEXT",{text:"add executed snippet "+t.text})})}COMMAND_TYPE_SNIPPET_EXECUTED(t){return i(this,void 0,void 0,function*(){this.setSourceAndCursor(t.source,t.cursor),this.focus()})}COMMAND_TYPE_SPLIT(t){return i(this,void 0,void 0,function*(){this.dispatch("pane:split-"+t.direction+"-and-copy-active-item"),yield this.uiDelay()})}COMMAND_TYPE_SWITCH_TAB(t){return i(this,void 0,void 0,function*(){atom.workspace.getActivePane().activateItemAtIndex(t.index-1),yield this.uiDelay()})}COMMAND_TYPE_UNDO(t){return i(this,void 0,void 0,function*(){let t=atom.workspace.getActiveTextEditor();t&&t.undo()})}COMMAND_TYPE_USE(t){return i(this,void 0,void 0,function*(){let e=t.index?t.index-1:0;this.state.set("highlighted",e);let n=this.state.get("alternatives");"type"in n&&"files"==n.type&&this.openPendingFileAtIndex(e)})}COMMAND_TYPE_WINDOW(t){return i(this,void 0,void 0,function*(){this.dispatch("window:focus-pane-"+{left:"on-left",right:"on-right",up:"above",down:"below"}[t.direction]),yield this.uiDelay()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.state=t,this.createPanel(),this.state.subscribe("docs",t=>{t?(this.container.querySelector("iframe").setAttribute("src",t),this.panel.show()):this.panel.hide()})}createPanel(){this.container=document.createElement("div"),this.container.innerHTML='\n<div class="docs-panel">\n  <iframe src="https://docs.serenade.ai" frameBorder="0"></iframe>\n  <button class="btn btn-close">&times;</button>\n</div>\n        ',this.container.querySelector(".btn-close").addEventListener("click",()=>{this.state.set("docs",!1)}),this.panel=atom.workspace.addRightPanel({item:this.container,visible:!1})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(46);e.default=class extends i.default{constructor(t,e,n,i){super(e,n,i,"Atom"),this.app=t}beforeHandle(){this.app.setCurrentEditor()}}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,a)}c((i=i.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=n(16),s=n(10);e.default=class{constructor(t,e,n,i){this.state=t,this.commandHandler=e,this.clientRunner=n,this.platform=i}os(){return"darwin"==process.platform?"MacOS":"win32"==process.platform?"Windows":"linux"==process.platform?"Linux":process.platform}beforeHandle(){}handle(t){return i(this,void 0,void 0,function*(){this.beforeHandle(),t.alternatives&&this.state.set("alternatives",{alternatives:t.alternatives});let e=null;if(t.execute){this.state.set("volume",0);for(let n=0;n<t.execute.sequences.length;n++){let i=t.execute.sequences[n];for(let t of i.commands)e=yield this.commandHandler[t.type](t)}}return e})}send(t,e={}){e.type=t;let n=JSON.stringify(e),i=r.request({host:"localhost",port:17373,path:"/",method:"POST",headers:{"Content-Type":"application/json","Content-Length":Buffer.byteLength(n),"User-Agent":`SerenadeClient/${this.clientRunner.clientVersion()} `+`(${this.os()} ${s.release()}; ${this.platform})`}});i.write(n),i.end()}start(){this.state.subscribe("listening",(t,e)=>{t!==!!e&&this.send(t?"ENABLE_LISTENING":"DISABLE_LISTENING")}),this.server=r.createServer((t,e)=>{let n="";t.on("data",t=>{n+=t}),t.on("end",()=>i(this,void 0,void 0,function*(){let t="";try{t=JSON.parse(n)}catch(t){return void e.end("")}let i=yield this.handle(t);i||(i={success:!0}),e.statusCode=200,e.setHeader("Content-Type","application/json"),e.end(JSON.stringify(i))}))}),this.server.once("error",t=>{"EADDRINUSE"!==t.code||console.error("Serenade is already running in another editor window.")}),this.server.listen(17374)}stop(){this.server&&this.server.close()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{destroy(){this.clientRunner.kill(),this.ipc.stop()}run(){this.state.subscribe("nuxCompleted",(t,e)=>{this.settings.set("nux_completed",t)}),this.state.set("nuxCompleted",this.settings.get("nux_completed")),this.state.set("appState","LOADING"),this.state.set("alternatives",{}),this.state.set("volume",0),this.state.set("listening",!1),this.state.set("status","Paused"),this.ipc.start(),this.clientRunner.installAndRun(()=>{const t=this.settings.get("token");this.state.set("appState",t&&t.length?"READY":"LOGIN_FORM")})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(49),r=n(82),s=n(83);e.default=class{constructor(t,e){this.state=t,this.settings=e}get(){return"darwin"===process.platform?new r.default(this.state,this.settings):"win32"===process.platform?new s.default(this.state,this.settings):new i.default(this.state,this.settings)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(11);e.default=class extends i.default{javaBinary(){return"./java"}javaPath(){return"bin"}jdkUrl(){return"https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_linux-x64_bin.tar.gz"}jdkVersion(){return"jdk-11.0.2"}}},function(t,e){t.exports=require("https")},function(t,e,n){t.exports=d,d.sync=m;var i=n(13),r=n(1),s=n(0),o=n(18),a=parseInt("666",8),c={nosort:!0,silent:!0},l=0,u="win32"===process.platform;function h(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(function(e){t[e]=t[e]||s[e],t[e+="Sync"]=t[e]||s[e]}),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,!1===t.glob&&(t.disableGlob=!0),t.disableGlob=t.disableGlob||!1,t.glob=t.glob||c}function d(t,e,n){"function"==typeof e&&(n=e,e={}),i(t,"rimraf: missing path"),i.equal(typeof t,"string","rimraf: path should be a string"),i.equal(typeof n,"function","rimraf: callback function required"),i(e,"rimraf: invalid options argument provided"),i.equal(typeof e,"object","rimraf: options should be object"),h(e);var r=0,s=null,a=0;if(e.disableGlob||!o.hasMagic(t))return c(null,[t]);function c(t,i){return t?n(t):0===(a=i.length)?n():void i.forEach(function(t){f(t,e,function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<e.maxBusyTries)return r++,setTimeout(function(){f(t,e,i)},100*r);if("EMFILE"===o.code&&l<e.emfileWait)return setTimeout(function(){f(t,e,i)},l++);"ENOENT"===o.code&&(o=null)}l=0,function(t){s=s||t,0==--a&&n(s)}(o)})})}e.lstat(t,function(n,i){if(!n)return c(null,[t]);o(t,e.glob,c)})}function f(t,e,n){i(t),i(e),i("function"==typeof n),e.lstat(t,function(i,r){return i&&"ENOENT"===i.code?n(null):(i&&"EPERM"===i.code&&u&&p(t,e,i,n),r&&r.isDirectory()?v(t,e,i,n):void e.unlink(t,function(i){if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return u?p(t,e,i,n):v(t,e,i,n);if("EISDIR"===i.code)return v(t,e,i,n)}return n(i)}))})}function p(t,e,n,r){i(t),i(e),i("function"==typeof r),n&&i(n instanceof Error),e.chmod(t,a,function(i){i?r("ENOENT"===i.code?null:n):e.stat(t,function(i,s){i?r("ENOENT"===i.code?null:n):s.isDirectory()?v(t,e,n,r):e.unlink(t,r)})})}function g(t,e,n){i(t),i(e),n&&i(n instanceof Error);try{e.chmodSync(t,a)}catch(t){if("ENOENT"===t.code)return;throw n}try{var r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?y(t,e,n):e.unlinkSync(t)}function v(t,e,n,s){i(t),i(e),n&&i(n instanceof Error),i("function"==typeof s),e.rmdir(t,function(o){!o||"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code?o&&"ENOTDIR"===o.code?s(n):s(o):function(t,e,n){i(t),i(e),i("function"==typeof n),e.readdir(t,function(i,s){if(i)return n(i);var o,a=s.length;if(0===a)return e.rmdir(t,n);s.forEach(function(i){d(r.join(t,i),e,function(i){if(!o)return i?n(o=i):void(0==--a&&e.rmdir(t,n))})})})}(t,e,s)})}function m(t,e){var n;if(h(e=e||{}),i(t,"rimraf: missing path"),i.equal(typeof t,"string","rimraf: path should be a string"),i(e,"rimraf: missing options"),i.equal(typeof e,"object","rimraf: options should be object"),e.disableGlob||!o.hasMagic(t))n=[t];else try{e.lstatSync(t),n=[t]}catch(i){n=o.sync(t,e.glob)}if(n.length)for(var r=0;r<n.length;r++){t=n[r];try{var s=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&u&&g(t,e,n)}try{s&&s.isDirectory()?y(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return u?g(t,e,n):y(t,e,n);if("EISDIR"!==n.code)throw n;y(t,e,n)}}}function y(t,e,n){i(t),i(e),n&&i(n instanceof Error);try{e.rmdirSync(t)}catch(s){if("ENOENT"===s.code)return;if("ENOTDIR"===s.code)throw n;"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code||function(t,e){i(t),i(e),e.readdirSync(t).forEach(function(n){m(r.join(t,n),e)});var n=u?100:1,s=0;for(;;){var o=!0;try{var a=e.rmdirSync(t,e);return o=!1,a}finally{if(++s<n&&o)continue}}}(t,e)}}},function(t,e,n){var i=n(1),r="win32"===process.platform,s=n(0),o=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(t){return"function"==typeof t?t:function(){var t;if(o){var e=new Error;t=function(t){t&&(e.message=t.message,n(t=e))}}else t=n;return t;function n(t){if(t){if(process.throwDeprecation)throw t;if(!process.noDeprecation){var e="fs: missing callback "+(t.stack||t.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}()}i.normalize;if(r)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(r)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;e.realpathSync=function(t,e){if(t=i.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return e[t];var n,o,a,u,h=t,d={},f={};function p(){var e=l.exec(t);n=e[0].length,o=e[0],a=e[0],u="",r&&!f[a]&&(s.lstatSync(a),f[a]=!0)}for(p();n<t.length;){c.lastIndex=n;var g=c.exec(t);if(u=o,o+=g[0],a=u+g[1],n=c.lastIndex,!(f[a]||e&&e[a]===a)){var v;if(e&&Object.prototype.hasOwnProperty.call(e,a))v=e[a];else{var m=s.lstatSync(a);if(!m.isSymbolicLink()){f[a]=!0,e&&(e[a]=a);continue}var y=null;if(!r){var b=m.dev.toString(32)+":"+m.ino.toString(32);d.hasOwnProperty(b)&&(y=d[b])}null===y&&(s.statSync(a),y=s.readlinkSync(a)),v=i.resolve(u,y),e&&(e[a]=v),r||(d[b]=y)}t=i.resolve(v,t.slice(n)),p()}}return e&&(e[h]=t),t},e.realpath=function(t,e,n){if("function"!=typeof n&&(n=a(e),e=null),t=i.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return process.nextTick(n.bind(null,null,e[t]));var o,u,h,d,f=t,p={},g={};function v(){var e=l.exec(t);o=e[0].length,u=e[0],h=e[0],d="",r&&!g[h]?s.lstat(h,function(t){if(t)return n(t);g[h]=!0,m()}):process.nextTick(m)}function m(){if(o>=t.length)return e&&(e[f]=t),n(null,t);c.lastIndex=o;var i=c.exec(t);return d=u,u+=i[0],h=d+i[1],o=c.lastIndex,g[h]||e&&e[h]===h?process.nextTick(m):e&&Object.prototype.hasOwnProperty.call(e,h)?w(e[h]):s.lstat(h,y)}function y(t,i){if(t)return n(t);if(!i.isSymbolicLink())return g[h]=!0,e&&(e[h]=h),process.nextTick(m);if(!r){var o=i.dev.toString(32)+":"+i.ino.toString(32);if(p.hasOwnProperty(o))return b(null,p[o],h)}s.stat(h,function(t){if(t)return n(t);s.readlink(h,function(t,e){r||(p[o]=e),b(t,e)})})}function b(t,r,s){if(t)return n(t);var o=i.resolve(d,r);e&&(e[s]=o),w(o)}function w(e){t=i.resolve(e,t.slice(o)),v()}v()}},function(t,e,n){var i=n(54),r=n(55);t.exports=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return function t(e,n){var s=[];var o=r("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var h=c||l;var v=o.body.indexOf(",")>=0;if(!h&&!v)return o.post.match(/,.*\}/)?(e=o.pre+"{"+o.body+a+o.post,t(e)):[e];var m;if(h)m=o.body.split(/\.\./);else if(1===(m=function t(e){if(!e)return[""];var n=[];var i=r("{","}",e);if(!i)return e.split(",");var s=i.pre;var o=i.body;var a=i.post;var c=s.split(",");c[c.length-1]+="{"+o+"}";var l=t(a);a.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l));n.push.apply(n,c);return n}(o.body)).length&&1===(m=t(m[0],!1).map(d)).length){var y=o.post.length?t(o.post,!1):[""];return y.map(function(t){return o.pre+m[0]+t})}var b=o.pre;var y=o.post.length?t(o.post,!1):[""];var w;if(h){var _=u(m[0]),E=u(m[1]),k=Math.max(m[0].length,m[1].length),x=3==m.length?Math.abs(u(m[2])):1,S=p,T=E<_;T&&(x*=-1,S=g);var L=m.some(f);w=[];for(var O=_;S(O,E);O+=x){var M;if(l)"\\"===(M=String.fromCharCode(O))&&(M="");else if(M=String(O),L){var A=k-M.length;if(A>0){var j=new Array(A+1).join("0");M=O<0?"-"+j+M.slice(1):j+M}}w.push(M)}}else w=i(m,function(e){return t(e,!1)});for(var P=0;P<w.length;P++)for(var N=0;N<y.length;N++){var R=b+w[P]+y[N];(!n||h||R)&&s.push(R)}return s}(function(t){return t.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(t),!0).map(h)};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function h(t){return t.split(s).join("\\").split(o).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function d(t){return"{"+t+"}"}function f(t){return/^-?0\d/.test(t)}function p(t,e){return t<=e}function g(t,e){return t>=e}},function(t,e){t.exports=function(t,e){for(var i=[],r=0;r<t.length;r++){var s=e(t[r],r);n(s)?i.push.apply(i,s):i.push(s)}return i};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function i(t,e,n){t instanceof RegExp&&(t=r(t,n)),e instanceof RegExp&&(e=r(e,n));var i=s(t,e,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+t.length,i[1]),post:n.slice(i[1]+e.length)}}function r(t,e){var n=e.match(t);return n?n[0]:null}function s(t,e,n){var i,r,s,o,a,c=n.indexOf(t),l=n.indexOf(e,c+1),u=c;if(c>=0&&l>0){for(i=[],s=n.length;u>=0&&!a;)u==c?(i.push(u),c=n.indexOf(t,u+1)):1==i.length?a=[i.pop(),l]:((r=i.pop())<s&&(s=r,o=l),l=n.indexOf(e,u+1)),u=c<l&&c>=0?c:l;i.length&&(a=[s,o])}return a}t.exports=i,i.range=s},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){t.exports=p,p.GlobSync=g;var i=n(0),r=n(19),s=n(14),o=(s.Minimatch,n(18).Glob,n(2),n(1)),a=n(13),c=n(15),l=n(21),u=(l.alphasort,l.alphasorti,l.setopts),h=l.ownProp,d=l.childrenIgnored,f=l.isIgnored;function p(t,e){if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(t,e).found}function g(t,e){if(!t)throw new Error("must provide pattern");if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(t,e);if(u(this,t,e),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var t=this;this.matches.forEach(function(e,n){var i=t.matches[n]=Object.create(null);for(var s in e)try{s=t._makeAbs(s),i[r.realpathSync(s,t.realpathCache)]=!0}catch(e){if("stat"!==e.syscall)throw e;i[t._makeAbs(s)]=!0}})}l.finish(this)},g.prototype._process=function(t,e,n){a(this instanceof g);for(var i,r=0;"string"==typeof t[r];)r++;switch(r){case t.length:return void this._processSimple(t.join("/"),e);case 0:i=null;break;default:i=t.slice(0,r).join("/")}var o,l=t.slice(r);null===i?o=".":c(i)||c(t.join("/"))?(i&&c(i)||(i="/"+i),o=i):o=i;var u=this._makeAbs(o);d(this,o)||(l[0]===s.GLOBSTAR?this._processGlobStar(i,o,u,l,e,n):this._processReaddir(i,o,u,l,e,n))},g.prototype._processReaddir=function(t,e,n,i,r,s){var a=this._readdir(n,s);if(a){for(var c=i[0],l=!!this.minimatch.negate,u=c._glob,h=this.dot||"."===u.charAt(0),d=[],f=0;f<a.length;f++){if("."!==(v=a[f]).charAt(0)||h)(l&&!t?!v.match(c):v.match(c))&&d.push(v)}var p=d.length;if(0!==p)if(1!==i.length||this.mark||this.stat){i.shift();for(f=0;f<p;f++){var g;v=d[f];g=t?[t,v]:[v],this._process(g.concat(i),r,s)}}else{this.matches[r]||(this.matches[r]=Object.create(null));for(var f=0;f<p;f++){var v=d[f];t&&(v="/"!==t.slice(-1)?t+"/"+v:t+v),"/"!==v.charAt(0)||this.nomount||(v=o.join(this.root,v)),this._emitMatch(r,v)}}}},g.prototype._emitMatch=function(t,e){if(!f(this,e)){var n=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=n),!this.matches[t][e]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}},g.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,n;try{n=i.lstatSync(t)}catch(t){if("ENOENT"===t.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[t]=r,r||!n||n.isDirectory()?e=this._readdir(t,!1):this.cache[t]="FILE",e},g.prototype._readdir=function(t,e){if(e&&!h(this.symlinks,t))return this._readdirInGlobStar(t);if(h(this.cache,t)){var n=this.cache[t];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,i.readdirSync(t))}catch(e){return this._readdirError(t,e),null}},g.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,e},g.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=e.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e)}},g.prototype._processGlobStar=function(t,e,n,i,r,s){var o=this._readdir(n,s);if(o){var a=i.slice(1),c=t?[t]:[],l=c.concat(a);this._process(l,r,!1);var u=o.length;if(!this.symlinks[n]||!s)for(var h=0;h<u;h++){if("."!==o[h].charAt(0)||this.dot){var d=c.concat(o[h],a);this._process(d,r,!0);var f=c.concat(o[h],i);this._process(f,r,!0)}}}},g.prototype._processSimple=function(t,e){var n=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),n){if(t&&c(t)&&!this.nomount){var i=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=o.join(this.root,t):(t=o.resolve(this.root,t),i&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}},g.prototype._stat=function(t){var e=this._makeAbs(t),n="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&h(this.cache,e)){var r=this.cache[e];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var s=this.statCache[e];if(!s){var o;try{o=i.lstatSync(e)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{s=i.statSync(e)}catch(t){s=o}else s=o}this.statCache[e]=s;r=!0;return s&&(r=s.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||r,(!n||"FILE"!==r)&&r},g.prototype._mark=function(t){return l.mark(this,t)},g.prototype._makeAbs=function(t){return l.makeAbs(this,t)}},function(t,e,n){var i=n(22),r=Object.create(null),s=n(8);function o(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i]=t[i];return n}t.exports=i(function(t,e){return r[t]?(r[t].push(e),null):(r[t]=[e],function(t){return s(function e(){var n=r[t],i=n.length,s=o(arguments);try{for(var a=0;a<i;a++)n[a].apply(null,s)}finally{n.length>i?(n.splice(0,i),process.nextTick(function(){e.apply(null,s)})):delete r[t]}})}(t))})},function(t,e,n){t.exports=n(60)},function(t,e,n){var i=n(0),r=n(61),s=n(80);t.exports={compress:function(t,e){var n=function(t){e(t)};return e=e||function(){},(t=t||{}).tar=t.tar||{},t.gz=t.gz||{},t.gz.level=t.gz.level||6,t.gz.memLevel=t.gz.memLevel||6,t.src?t.dest?void process.nextTick(function(){r.pack(t.src,t.tar).on("error",n).pipe(s.createGzip(t.gz).on("error",n)).pipe(i.createWriteStream(t.dest).on("error",n).on("finish",e))}):n("No destination for compress!"):n("No source for compress!")},decompress:function(t,e){var n=function(t){e(t)};return e=e||function(){},(t=t||{}).tar=t.tar||{},t.gz=t.gz||{},t.src?t.dest?void process.nextTick(function(){i.createReadStream(t.src).on("error",n).pipe(s.createGunzip(t.gz).on("error",n)).pipe(r.extract(t.dest,t.tar).on("error",n).on("finish",e))}):n("No destination for decompress!"):n("No source for decompress!")}}},function(t,e,n){var i=n(62),r=n(63),s=n(79),o=n(12),a=n(0),c=n(1),l="win32"===n(10).platform(),u=function(){},h=function(t){return t},d=l?function(t){return t.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")}:h,f=function(t,e){return function(n){n.name=n.name.split("/").slice(e).join("/");var i=n.linkname;return i&&("link"===n.type||c.isAbsolute(i))&&(n.linkname=i.split("/").slice(e).join("/")),t(n)}};e.pack=function(t,e){t||(t="."),e||(e={});var n=e.fs||a,i=e.ignore||e.filter||u,o=e.map||u,l=e.mapStream||h,g=function(t,e,n,i,r,s){var o=r||["."];return function(r){if(!o.length)return r();var a=o.shift(),l=c.join(n,a);e(l,function(e,u){return e?r(e):u.isDirectory()?void t.readdir(l,function(t,e){if(t)return r(t);s&&e.sort();for(var l=0;l<e.length;l++)i(c.join(n,a,e[l]))||o.push(c.join(a,e[l]));r(null,a,u)}):r(null,a,u)})}}(n,e.dereference?n.stat:n.lstat,t,i,e.entries,e.sort),v=!1!==e.strict,m="number"==typeof e.umask?~e.umask:~p(),y="number"==typeof e.dmode?e.dmode:0,b="number"==typeof e.fmode?e.fmode:0,w=e.pack||r.pack(),_=e.finish||u;e.strip&&(o=f(o,e.strip)),e.readable&&(y|=parseInt(555,8),b|=parseInt(444,8)),e.writable&&(y|=parseInt(333,8),b|=parseInt(222,8));var E=function(i,r,a){if(i)return w.destroy(i);if(!r)return!1!==e.finalize&&w.finalize(),_(w);if(a.isSocket())return k();var u={name:d(r),mode:(a.mode|(a.isDirectory()?y:b))&m,mtime:a.mtime,size:a.size,type:"file",uid:a.uid,gid:a.gid};if(a.isDirectory())return u.size=0,u.type="directory",u=o(u)||u,w.entry(u,k);if(a.isSymbolicLink())return u.size=0,u.type="symlink",function(e,i){n.readlink(c.join(t,e),function(t,e){if(t)return w.destroy(t);i.linkname=d(e),w.entry(i,k)})}(r,u=o(u)||u);if(u=o(u)||u,!a.isFile())return v?w.destroy(new Error("unsupported type for "+r)):k();var h=w.entry(u,k);if(h){var f=l(n.createReadStream(c.join(t,r)),u);f.on("error",function(t){h.destroy(t)}),s(f,h)}},k=function(t){if(t)return w.destroy(t);g(E)};return k(),w};var p=function(){return process.umask?process.umask():0};function g(t,e,n){o(t,{fs:e.fs},function(t,r){!t&&r&&e.own?i(r,e.uid,e.gid,n):n(t)})}e.extract=function(t,e){t||(t="."),e||(e={});var n=e.fs||a,i=e.ignore||e.filter||u,o=e.map||u,v=e.mapStream||h,m=!1!==e.chown&&!l&&0===(process.getuid?process.getuid():-1),y=e.extract||r.extract(),b=[],w=new Date,_="number"==typeof e.umask?~e.umask:~p(),E="number"==typeof e.dmode?e.dmode:0,k="number"==typeof e.fmode?e.fmode:0,x=!1!==e.strict;e.strip&&(o=f(o,e.strip)),e.readable&&(E|=parseInt(555,8),k|=parseInt(444,8)),e.writable&&(E|=parseInt(333,8),k|=parseInt(222,8));var S=function(t,e){for(var i,r;(i=(r=b).length?r[r.length-1]:null)&&t.slice(0,i[0].length)!==i[0];)b.pop();if(!i)return e();n.utimes(i[0],w,i[1],e)};return y.on("entry",function(r,a,u){(r=o(r)||r).name=d(r.name);var h=c.join(t,c.join("/",r.name));if(i(h,r))return a.resume(),u();var f=function(t){if(t)return u(t);!function(t,i,r){!1===e.utimes?r():"directory"===i.type?n.utimes(t,w,i.mtime,r):"symlink"===i.type?S(t,r):n.utimes(t,w,i.mtime,function(e){if(e)return r(e);S(t,r)})}(h,r,function(t){return t?u(t):l?u():void function(t,e,i){var r="symlink"===e.type,s=r?n.lchmod:n.chmod,o=r?n.lchown:n.chown;if(!s)return i();var a=(e.mode|("directory"===e.type?E:k))&_;s(t,a,function(n){return n?i(n):m&&o?void o(t,e.uid,e.gid,i):i()})}(h,r,u)})},p=function(){var t=n.createWriteStream(h),e=v(a,r);t.on("error",function(t){e.destroy(t)}),s(e,t,function(e){if(e)return u(e);t.on("close",f)})};if("directory"===r.type)return b.push([h,r.mtime]),g(h,{fs:n,own:m,uid:r.uid,gid:r.gid},f);var y=c.dirname(h);!function t(e,n,i,r){if(n===i)return r(null,!0);e.lstat(n,function(s,o){return s&&"ENOENT"!==s.code?r(s):s||o.isDirectory()?t(e,c.join(n,".."),i,r):void r(null,!1)})}(n,y,c.join(t,"."),function(i,s){return i?u(i):s?void g(y,{fs:n,own:m,uid:r.uid,gid:r.gid},function(i){if(i)return u(i);switch(r.type){case"file":return p();case"link":return function(){if(l)return u();n.unlink(h,function(){var i=c.join(t,c.join("/",r.linkname));n.link(i,h,function(t){if(t&&"EPERM"===t.code&&e.hardlinkAsFilesFallback)return a=n.createReadStream(i),p();f(t)})})}();case"symlink":return function(){if(l)return u();n.unlink(h,function(){n.symlink(r.linkname,h,f)})}()}if(x)return u(new Error("unsupported type for "+h+" ("+r.type+")"));a.resume(),u()}):u(new Error(y+" is not a valid path"))})}),e.finish&&y.on("finish",e.finish),y}},function(t,e,n){"use strict";const i=n(0),r=n(1),s=i.lchown?"lchown":"chown",o=i.lchownSync?"lchownSync":"chownSync",a=i.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),c=a?(t,e,n,r)=>s=>{s&&"EISDIR"===s.code?i.chown(t,e,n,r):r(s)}:(t,e,n,i)=>i,l=a?(t,e,n)=>{try{return i[o](t,e,n)}catch(r){if("EISDIR"!==r.code)throw r;i.chownSync(t,e,n)}}:i[o],u=process.version;let h=(t,e,n)=>i.readdir(t,e,n);/^v4\./.test(u)&&(h=(t,e,n)=>i.readdir(t,n));const d=(t,e,n,o,a)=>{if("string"==typeof e)return i.lstat(r.resolve(t,e),(i,r)=>{if(i)return a(i);r.name=e,d(t,r,n,o,a)});if(e.isDirectory())f(r.resolve(t,e.name),n,o,l=>{if(l)return a(l);const u=r.resolve(t,e.name);i[s](u,n,o,c(u,n,o,a))});else{const l=r.resolve(t,e.name);i[s](l,n,o,c(l,n,o,a))}},f=(t,e,n,r)=>{h(t,{withFileTypes:!0},(o,a)=>{if(o&&"ENOTDIR"!==o.code&&"ENOTSUP"!==o.code)return r(o);if(o||!a.length)return i[s](t,e,n,c(t,e,n,r));let l=a.length,u=null;const h=o=>{if(!u)return o?r(u=o):0==--l?i[s](t,e,n,c(t,e,n,r)):void 0};a.forEach(i=>d(t,i,e,n,h))})},p=(t,e,n)=>{let s;try{s=((t,e)=>i.readdirSync(t,e))(t,{withFileTypes:!0})}catch(i){if(i&&"ENOTDIR"===i.code&&"ENOTSUP"!==i.code)return l(t,e,n);throw i}return s.length&&s.forEach(s=>((t,e,n,s)=>{if("string"==typeof e){const n=i.lstatSync(r.resolve(t,e));n.name=e,e=n}e.isDirectory()&&p(r.resolve(t,e.name),n,s),l(r.resolve(t,e.name),n,s)})(t,s,e,n)),l(t,e,n)};t.exports=f,f.sync=p},function(t,e,n){e.extract=n(64),e.pack=n(75)},function(t,e,n){var i=n(2),r=n(65),s=n(72),o=n(30),a=n(5).Writable,c=n(5).PassThrough,l=function(){},u=function(t){return(t&=511)&&512-t},h=function(t,e){this._parent=t,this.offset=e,c.call(this)};i.inherits(h,c),h.prototype.destroy=function(t){this._parent.destroy(t)};var d=function(t){if(!(this instanceof d))return new d(t);a.call(this,t),t=t||{},this._offset=0,this._buffer=r(),this._missing=0,this._partial=!1,this._onparse=l,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var e=this,n=e._buffer,i=function(){e._continue()},c=function(t){if(e._locked=!1,t)return e.destroy(t);e._stream||i()},f=function(){e._stream=null;var t=u(e._header.size);t?e._parse(t,p):e._parse(512,b),e._locked||i()},p=function(){e._buffer.consume(u(e._header.size)),e._parse(512,b),i()},g=function(){var t=e._header.size;e._paxGlobal=o.decodePax(n.slice(0,t)),n.consume(t),f()},v=function(){var t=e._header.size;e._pax=o.decodePax(n.slice(0,t)),e._paxGlobal&&(e._pax=s(e._paxGlobal,e._pax)),n.consume(t),f()},m=function(){var i=e._header.size;this._gnuLongPath=o.decodeLongPath(n.slice(0,i),t.filenameEncoding),n.consume(i),f()},y=function(){var i=e._header.size;this._gnuLongLinkPath=o.decodeLongPath(n.slice(0,i),t.filenameEncoding),n.consume(i),f()},b=function(){var r,s=e._offset;try{r=e._header=o.decode(n.slice(0,512),t.filenameEncoding)}catch(t){e.emit("error",t)}return n.consume(512),r?"gnu-long-path"===r.type?(e._parse(r.size,m),void i()):"gnu-long-link-path"===r.type?(e._parse(r.size,y),void i()):"pax-global-header"===r.type?(e._parse(r.size,g),void i()):"pax-header"===r.type?(e._parse(r.size,v),void i()):(e._gnuLongPath&&(r.name=e._gnuLongPath,e._gnuLongPath=null),e._gnuLongLinkPath&&(r.linkname=e._gnuLongLinkPath,e._gnuLongLinkPath=null),e._pax&&(e._header=r=function(t,e){return e.path&&(t.name=e.path),e.linkpath&&(t.linkname=e.linkpath),e.size&&(t.size=parseInt(e.size,10)),t.pax=e,t}(r,e._pax),e._pax=null),e._locked=!0,r.size&&"directory"!==r.type?(e._stream=new h(e,s),e.emit("entry",r,e._stream,c),e._parse(r.size,f),void i()):(e._parse(512,b),void e.emit("entry",r,function(t,e){var n=new h(t,e);return n.end(),n}(e,s),c))):(e._parse(512,b),void i())};this._onheader=b,this._parse(512,b)};i.inherits(d,a),d.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.emit("close"))},d.prototype._parse=function(t,e){this._destroyed||(this._offset+=t,this._missing=t,e===this._onheader&&(this._partial=!1),this._onparse=e)},d.prototype._continue=function(){if(!this._destroyed){var t=this._cb;this._cb=l,this._overflow?this._write(this._overflow,void 0,t):t()}},d.prototype._write=function(t,e,n){if(!this._destroyed){var i=this._stream,r=this._buffer,s=this._missing;if(t.length&&(this._partial=!0),t.length<s)return this._missing-=t.length,this._overflow=null,i?i.write(t,n):(r.append(t),n());this._cb=n,this._missing=0;var o=null;t.length>s&&(o=t.slice(s),t=t.slice(0,s)),i?i.end(t):r.append(t),this._overflow=o,this._onparse()}},d.prototype._final=function(t){if(this._partial)return this.destroy(new Error("Unexpected end of data"));t()},t.exports=d},function(t,e,n){var i=n(66),r=n(2),s=n(6).Buffer;function o(t){if(!(this instanceof o))return new o(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)})}else this.append(t);i.call(this)}r.inherits(o,i),o.prototype._offset=function(t){var e,n=0,i=0;if(0===t)return[0,0];for(;i<this._bufs.length;i++){if(t<(e=n+this._bufs[i].length)||i==this._bufs.length-1)return[i,t-n];n=e}},o.prototype.append=function(t){var e=0;if(s.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof o)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(s.from(t)));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},o.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},o.prototype.end=function(t){i.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype.get=function(t){return this.slice(t,t+1)[0]},o.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return t||s.alloc(0);if(i<=0)return t||s.alloc(0);var r,o,a=!!t,c=this._offset(n),l=i-n,u=l,h=a&&e||0,d=c[1];if(0===n&&i==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:s.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(t,h),h+=this._bufs[o].length;return t}if(u<=this._bufs[c[0]].length-d)return a?this._bufs[c[0]].copy(t,e,d,d+u):this._bufs[c[0]].slice(d,d+u);for(a||(t=s.allocUnsafe(l)),o=c[0];o<this._bufs.length;o++){if(!(u>(r=this._bufs[o].length-d))){this._bufs[o].copy(t,h,d,d+u);break}this._bufs[o].copy(t,h,d),h+=r,u-=r,d&&(d=0)}return t},o.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),i=this._offset(e),r=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,i[1]),0!=n[1]&&(r[0]=r[0].slice(n[1])),new o(r)},o.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},o.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){for(var t=0,e=new o;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){o.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=o},function(t,e,n){t.exports=n(5).Duplex},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=require("buffer")},function(t,e,n){"use strict";var i=n(6).Buffer,r=n(2);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,s=i.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,n=s,r=a,e.copy(n,r),a+=o.data.length,o=o.next;return s},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e,n){t.exports=n(2).deprecate},function(t,e,n){"use strict";t.exports=s;var i=n(29),r=n(7);function s(t){if(!(this instanceof s))return new s(t);i.call(this,t)}r.inherits=n(3),r.inherits(s,i),s.prototype._transform=function(t,e,n){n(null,t)}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var r in i)n.call(i,r)&&(t[r]=i[r])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){var n=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var t=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return t.fill("ab","ucs2"),"61006200"===t.toString("hex")}catch(t){return!1}}();function i(t,e,n,i){if(n<0||i>t.length)throw new RangeError("Out of range index");return n>>>=0,(i=void 0===i?t.length:i>>>0)>n&&t.fill(e,n,i),t}t.exports=function(t,e,r,s,o){if(n)return t.fill(e,r,s,o);if("number"==typeof e)return i(t,e,r,s);if("string"==typeof e){if("string"==typeof r?(o=r,r=0,s=t.length):"string"==typeof s&&(o=s,s=t.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("latin1"===o&&(o="binary"),"string"==typeof o&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(""===e)return i(t,0,r,s);if(function(t){return 1===t.length&&t.charCodeAt(0)<256}(e))return i(t,e.charCodeAt(0),r,s);e=new Buffer(e,o)}return Buffer.isBuffer(e)?function(t,e,n,i){if(n<0||i>t.length)throw new RangeError("Out of range index");if(i<=n)return t;n>>>=0,i=void 0===i?t.length:i>>>0;for(var r=n,s=e.length;r<=i-s;)e.copy(t,r),r+=s;return r!==i&&e.copy(t,r,0,i-r),t}(t,e,r,s):i(t,0,r,s)}},function(t,e){t.exports=function(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t)}},function(t,e,n){var i=n(76),r=n(33),s=n(2),o=n(32),a=n(31),c=n(5).Readable,l=n(5).Writable,u=n(78).StringDecoder,h=n(30),d=parseInt("755",8),f=parseInt("644",8),p=o(1024),g=function(){},v=function(t,e){(e&=511)&&t.push(p.slice(0,512-e))};var m=function(t){l.call(this),this.written=0,this._to=t,this._destroyed=!1};s.inherits(m,l),m.prototype._write=function(t,e,n){if(this.written+=t.length,this._to.push(t))return n();this._to._drain=n},m.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var y=function(){l.call(this),this.linkname="",this._decoder=new u("utf-8"),this._destroyed=!1};s.inherits(y,l),y.prototype._write=function(t,e,n){this.linkname+=this._decoder.write(t),n()},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var b=function(){l.call(this),this._destroyed=!1};s.inherits(b,l),b.prototype._write=function(t,e,n){n(new Error("No body allowed for this entry"))},b.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var w=function(t){if(!(this instanceof w))return new w(t);c.call(this,t),this._drain=g,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};s.inherits(w,c),w.prototype.entry=function(t,e,n){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof e&&(n=e,e=null),n||(n=g);var s=this;if(t.size&&"symlink"!==t.type||(t.size=0),t.type||(t.type=function(t){switch(t&i.S_IFMT){case i.S_IFBLK:return"block-device";case i.S_IFCHR:return"character-device";case i.S_IFDIR:return"directory";case i.S_IFIFO:return"fifo";case i.S_IFLNK:return"symlink"}return"file"}(t.mode)),t.mode||(t.mode="directory"===t.type?d:f),t.uid||(t.uid=0),t.gid||(t.gid=0),t.mtime||(t.mtime=new Date),"string"==typeof e&&(e=a(e)),Buffer.isBuffer(e))return t.size=e.length,this._encode(t),this.push(e),v(s,t.size),process.nextTick(n),new b;if("symlink"===t.type&&!t.linkname){var o=new y;return r(o,function(e){if(e)return s.destroy(),n(e);t.linkname=o.linkname,s._encode(t),n()}),o}if(this._encode(t),"file"!==t.type&&"contiguous-file"!==t.type)return process.nextTick(n),new b;var c=new m(this);return this._stream=c,r(c,function(e){return s._stream=null,e?(s.destroy(),n(e)):c.written!==t.size?(s.destroy(),n(new Error("size mismatch"))):(v(s,t.size),s._finalizing&&s.finalize(),void n())}),c}},w.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},w.prototype.destroy=function(t){this._destroyed||(this._destroyed=!0,t&&this.emit("error",t),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},w.prototype._encode=function(t){if(!t.pax){var e=h.encode(t);if(e)return void this.push(e)}this._encodePax(t)},w.prototype._encodePax=function(t){var e=h.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),n={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};this.push(h.encode(n)),this.push(e),v(this,e.length),n.size=t.size,n.type=t.type,this.push(h.encode(n))},w.prototype._read=function(t){var e=this._drain;this._drain=g,e()},t.exports=w},function(t,e,n){t.exports=n(0).constants||n(77)},function(t,e){t.exports=require("constants")},function(t,e){t.exports=require("string_decoder")},function(t,e,n){var i=n(8),r=n(33),s=n(0),o=function(){},a=function(t){return"function"==typeof t},c=function(t,e,n,c){c=i(c);var l=!1;t.on("close",function(){l=!0}),r(t,{readable:e,writable:n},function(t){if(t)return c(t);l=!0,c()});var u=!1;return function(e){if(!l&&!u)return u=!0,function(t){return!!s&&(t instanceof(s.ReadStream||o)||t instanceof(s.WriteStream||o))&&a(t.close)}(t)?t.close(o):function(t){return t.setHeader&&a(t.abort)}(t)?t.abort():a(t.destroy)?t.destroy():void c(e||new Error("stream was destroyed"))}},l=function(t){t()},u=function(t,e){return t.pipe(e)};t.exports=function(){var t,e=Array.prototype.slice.call(arguments),n=a(e[e.length-1]||o)&&e.pop()||o;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var i=e.map(function(r,s){var o=s<e.length-1;return c(r,o,s>0,function(e){t||(t=e),e&&i.forEach(l),o||(i.forEach(l),n(t))})});return e.reduce(u)}},function(t,e){t.exports=require("zlib")},function(t,e,n){"use strict";var i=n(17),r=i.spawn,s=i.exec;function o(t,e,n){var i={};try{Object.keys(t).forEach(function(n){t[n].forEach(function(t){i[t]||(a(t,e),i[t]=1)}),i[n]||(a(n,e),i[n]=1)})}catch(t){if(n)return n(t);throw t}if(n)return n()}function a(t,e){try{process.kill(parseInt(t,10),e)}catch(t){if("ESRCH"!==t.code)throw t}}function c(t,e,n,i,r){var s=i(t),o="";s.stdout.on("data",function(t){t=t.toString("ascii");o+=t});s.on("close",function(s){delete n[t],0==s?o.match(/\d+/g).forEach(function(s){s=parseInt(s,10),e[t].push(s),e[s]=[],n[s]=1,c(s,e,n,i,r)}):0==Object.keys(n).length&&r()})}t.exports=function(t,e,n){var i={},a={};switch(i[t]=[],a[t]=1,"function"==typeof e&&void 0===n&&(n=e,e=void 0),process.platform){case"win32":s("taskkill /pid "+t+" /T /F",n);break;case"darwin":c(t,i,a,function(t){return r("pgrep",["-P",t])},function(){o(i,e,n)});break;default:c(t,i,a,function(t){return r("ps",["-o","pid","--no-headers","--ppid",t])},function(){o(i,e,n)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(11);e.default=class extends i.default{javaBinary(){return"./java"}javaPath(){return"bin"}jdkUrl(){return`https://cdn.serenade.ai/jdk/jdk-mac-${this.jdkVersion()}.tar.gz`}jdkVersion(){return"fa019a048911b0fd95c7bac642244f34"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(11);e.default=class extends i.default{javaBinary(){return"java.exe"}javaPath(){return"bin"}jdkUrl(){return`https://cdn.serenade.ai/jdk/jdk-windows-${this.jdkVersion()}.tar.gz`}jdkVersion(){return"86526c4bd2c90a6bafbd1032ec0bf3b9"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),r=n(12),s=n(10);e.default=class{constructor(){this.data={},this.defaults={disable_autostart:!1,ignore:[".git/",".gradle/",".pyc$",".class$",".jar$",".dylib$"],token:""}}file(){return`${this.path()}/settings.json`}load(){if(this.data={},r.sync(this.path()),i.existsSync(this.file()))try{this.data=JSON.parse(i.readFileSync(this.file()).toString())}catch(t){}}get(t){return this.load(),void 0===this.data[t]?this.defaults[t]:this.data[t]}path(){return`${s.homedir()}/.serenade`}save(){r.sync(this.path()),i.writeFileSync(this.file(),JSON.stringify(this.data))}set(t,e){this.load(),this.data[t]=e,this.save()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.data={},this.callbacks={}}afterSet(t,e,n){}get(t){return this.data[t]}set(t,e){let n=this.data[t];if(n&&(n=JSON.parse(JSON.stringify(this.data[t]))),this.data[t]=e,t in this.callbacks)for(let i of this.callbacks[t])i(e,n);this.afterSet(t,e,n)}subscribe(t,e){t in this.callbacks||(this.callbacks[t]=[]),this.callbacks[t].push(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.app=t,this.ipc=e,this.container=document.createElement("div"),this.container.classList.add("serenade"),this.container.classList.add("transcript-input-container"),this.input=document.createElement("atom-text-editor"),this.input.setAttribute("mini","true"),this.input.addEventListener("blur",()=>{this.hide()}),this.input.addEventListener("keyup",t=>{27==t.which?this.hide():13==t.which&&(this.execute(),this.hide())}),this.container.appendChild(this.input),this.panel=atom.workspace.addModalPanel({item:this.container,visible:!1})}execute(){this.ipc.send("SEND_TEXT",{text:this.input.getModel().getText()})}hide(){this.panel.hide(),this.app.focusEditor()}show(){this.input.getModel().setText(""),this.panel.show(),this.input.focus()}}}]);
//# sourceMappingURL=extension.js.map