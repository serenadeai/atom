module.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(8);var r,s;!function(t){t[t.Add=0]="Add",t[t.Delete=1]="Delete"}(r=e.DiffRangeType||(e.DiffRangeType={})),function(t){t[t.Line=0]="Line",t[t.Word=1]="Word"}(s=e.DiffHighlightType||(e.DiffHighlightType={}));class o{constructor(t,e){this.row=t,this.column=e}static fromArray(t){return new o(t[0],t[1])}}e.DiffPoint=o;class a{constructor(t,e,i,n){this.diffRangeType=t,this.diffHighlightType=e,this.start=i,this.stop=n}static fromDiff(t,e,i,n){let r=s.Word;const f=h(e,i),l=h(e,i+n);return f[0]==l[0]&&(f[1]++,l[1]++),i+n!=e.length-1&&"\n"!=e[i]||(f[0]++,f[1]=0,r=s.Line,f[0]==l[0]&&(l[0]++,l[1]=0)),new a(t,r,o.fromArray(f),o.fromArray(l))}}function h(t,e){let i=0,n=0;for(let r=0;r<e;r++)n++,"\n"==t[r]&&(i++,n=0);return[i,n]}e.DiffRange=a,e.cursorToRowAndColumn=h,e.diff=function(t,e){const i=new n;let s=i.diff_main(t,e);i.diff_cleanupSemantic(s);let o=[],h=-1,f=-1;for(const i of s)0==i[0]?(h+=i[1].length,f+=i[1].length):1==i[0]?(o.push(a.fromDiff(r.Add,e,f,i[1].length)),f+=i[1].length):-1==i[0]&&(o.push(a.fromDiff(r.Delete,t,h,i[1].length)),h+=i[1].length);return o}},function(t,e){t.exports=require("fs")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new(i(3).default);e.activate=function(t){n.activate()},e.deactivate=function(){n.deactivate()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(4),r=i(5),s=i(6),o=i(9),a=i(11);e.default=class extends r.default{activate(){this.initialize(),this.subscriptions=new n.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"serenade:initialize":()=>this.initialize()}))}deactivate(){this.destroy(),this.subscriptions.dispose()}initialize(){this.ipc||(this.settings=new a.default,this.commandHandler=new s.default(this.settings),this.ipc=new o.default(this.commandHandler,17375),this.commandHandler.pollActiveEditor(),this.run())}}},function(t,e){t.exports=require("atom")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{destroy(){this.ipc.stop()}run(){this.ipc.start()}}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(7),s=i(0);e.default=class extends r.default{constructor(){super(...arguments),this.activeEditor=atom.workspace.getActiveTextEditor(),this.ignorePatternsData=null,this.pendingFiles=[]}dispatch(t){let e=atom.workspace.getActivePane();this.activeEditor&&(e=atom.views.getView(this.activeEditor)),atom.commands.dispatch(e,t)}ignorePatterns(){if(null==this.ignorePatternsData){let t=[],e=[];for(let i of this.settings.get("ignore"))i.endsWith("/")?t.push(i.replace(/\/+$/g,"")):e.push(i);this.ignorePatternsData={directory:new RegExp(t.join("|")),file:new RegExp(e.join("|"))}}return this.ignorePatternsData}openPendingFileAtIndex(t){t<0||t>=this.pendingFiles.length||atom.workspace.open(this.pendingFiles[t].getPath())}searchFiles(t,e){let i=new RegExp(t.toLowerCase().replace(/ /g,"(.*)"));if(e.getPath().match(this.ignorePatterns().directory))return[];let n=[],r=this.ignorePatterns().file;for(let s of e.getEntriesSync())if(s.isDirectory())n.push(...this.searchFiles(t,s));else if(s.isFile()){let t=s.getPath().toLowerCase().replace(/\/|\./g,"");!(t.search(i)>-1)||r&&t.match(r)||n.push(s)}return n}focus(){return n(this,void 0,void 0,function*(){!atom.workspace.getActiveTextEditor()&&this.activeEditor&&atom.workspace.paneForItem(this.activeEditor).activate()})}getActiveEditorText(){if(this.activeEditor)return this.activeEditor.getText()}highlightRanges(t){const e=[1,2,3,4,3,2,1],i=250/e.length;if(this.activeEditor&&0!=t.length)for(let n of t)for(let t=0;t<e.length;t++)setTimeout(()=>{const r=this.activeEditor.markBufferRange([n.start,n.stop]);this.activeEditor.decorateMarker(r,{type:"highlight",class:n.diffRangeType==s.DiffRangeType.Delete?`error-color-${e[t]}`:`success-color-${e[t]}`}),setTimeout(()=>{r.destroy()},i)},t*i)}pollActiveEditor(){setInterval(()=>{const t=atom.workspace.getActiveTextEditor();t&&(this.activeEditor=t)},1e3)}scrollToCursor(){return n(this,void 0,void 0,function*(){})}setSourceAndCursor(t,e,i,n){this.activeEditor&&this.activeEditor.transact(()=>{this.activeEditor.setText(e),this.activeEditor.setCursorBufferPosition([i,n])})}COMMAND_TYPE_CLOSE_TAB(t){return n(this,void 0,void 0,function*(){atom.workspace.getActivePane().destroyActiveItem(),yield this.uiDelay()})}COMMAND_TYPE_CLOSE_WINDOW(t){return n(this,void 0,void 0,function*(){this.dispatch("pane:close"),yield this.uiDelay()})}COMMAND_TYPE_COPY(t){return n(this,void 0,void 0,function*(){t&&t.text&&atom.clipboard.write(t.text)})}COMMAND_TYPE_CREATE_TAB(t){return n(this,void 0,void 0,function*(){yield this.focus(),atom.workspace.open(),yield this.uiDelay()})}COMMAND_TYPE_DIFF(t){return n(this,void 0,void 0,function*(){yield this.updateEditor(t.source,t.cursor)})}COMMAND_TYPE_GET_EDITOR_STATE(t){return n(this,void 0,void 0,function*(){let t={source:"",cursor:0,filename:""};if(!this.activeEditor)return t;let e=this.activeEditor.getCursorBufferPosition(),i=e.row,n=e.column,r=this.activeEditor.getText(),s=0,o=0,a=0;for(let t=0;t<r.length;t++){if(o==i){if(a==n)break;a++}"\n"==r[t]&&o++,s++}return t.source=r,t.cursor=s,t.filename=this.activeEditor.getPath(),t})}COMMAND_TYPE_GO_TO_DEFINITION(t){return n(this,void 0,void 0,function*(){})}COMMAND_TYPE_NEXT_TAB(t){return n(this,void 0,void 0,function*(){yield this.focus(),atom.workspace.getActivePane().activateNextItem(),yield this.uiDelay()})}COMMAND_TYPE_OPEN_FILE(t){return n(this,void 0,void 0,function*(){let e=atom.project.getPaths();e.sort((t,e)=>e.length-t.length);let i=[];for(let e of atom.project.getDirectories())i.push(...this.searchFiles(t.path,e));this.pendingFiles=i,i.map(t=>{let i=t.getPath();for(let t of e)if(i.startsWith(t)){i=i.substring(t.length+1);break}return{description:`open <code>${i}</code>`}})})}COMMAND_TYPE_PASTE(t){return n(this,void 0,void 0,function*(){if(!this.activeEditor)return;let e=atom.clipboard.read(),i=this.activeEditor.getText();this.pasteText(i,t,e)})}COMMAND_TYPE_PREVIOUS_TAB(t){return n(this,void 0,void 0,function*(){yield this.focus(),atom.workspace.getActivePane().activatePreviousItem(),yield this.uiDelay()})}COMMAND_TYPE_REDO(t){return n(this,void 0,void 0,function*(){this.activeEditor&&this.activeEditor.redo()})}COMMAND_TYPE_SAVE(t){return n(this,void 0,void 0,function*(){if(this.activeEditor)if(this.activeEditor.getPath())this.activeEditor.save();else{let t=atom.applicationDelegate.showSaveDialog();t&&this.activeEditor.saveAs(t)}})}COMMAND_TYPE_SPLIT(t){return n(this,void 0,void 0,function*(){yield this.focus(),this.dispatch("pane:split-"+t.direction+"-and-copy-active-item"),yield this.uiDelay()})}COMMAND_TYPE_SWITCH_TAB(t){return n(this,void 0,void 0,function*(){yield this.focus(),atom.workspace.getActivePane().activateItemAtIndex(t.index-1),yield this.uiDelay()})}COMMAND_TYPE_UNDO(t){return n(this,void 0,void 0,function*(){this.activeEditor&&this.activeEditor.undo()})}COMMAND_TYPE_WINDOW(t){return n(this,void 0,void 0,function*(){yield this.focus(),this.dispatch("window:focus-pane-"+{left:"on-left",right:"on-right",up:"above",down:"below"}[t.direction]),yield this.uiDelay()})}}},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(0);e.default=class{constructor(t){this.settings=t}pasteText(t,e,i){let n=e.cursor||0,r=n;if(e.direction&&!i.endsWith("\n")&&(i+="\n"),i.endsWith("\n")||e.direction){if(e.direction=e.direction||"below","below"===e.direction){for(;n<t.length;n++)if("\n"===t[n]){n++;break}}else if("above"===e.direction)for("\n"===t[n]&&n>0&&n--;n>=0;n--)if("\n"===t[n]){n++;break}r=n}r+=i.length,i.endsWith("\n")&&r--,this.updateEditor(t.substring(0,n)+i+t.substring(n),r)}uiDelay(){return n(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(()=>{t()},100)})})}updateEditor(t,e){return n(this,void 0,void 0,function*(){yield this.focus();const i=this.getActiveEditorText()||"";t=t||"";let[s,o]=r.cursorToRowAndColumn(t,e),a=r.diff(i,t);0==a.length&&(a=[new r.DiffRange(r.DiffRangeType.Add,r.DiffHighlightType.Line,new r.DiffPoint(s,0),new r.DiffPoint(s+1,0))]);const h=!this.settings.get("disable_animations"),f=h?a.filter(t=>t.diffRangeType==r.DiffRangeType.Add):[],l=h?a.filter(t=>t.diffRangeType==r.DiffRangeType.Delete):[];return this.highlightRanges(l),new Promise(e=>{setTimeout(()=>n(this,void 0,void 0,function*(){this.setSourceAndCursor(i,t,s,o),this.highlightRanges(f),yield this.scrollToCursor(),e()}),l.length>0?400:0)})})}}},function(t,e){var i=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};i.Diff=function(t,e){this[0]=t,this[1]=e},i.Diff.prototype.length=2,i.Diff.prototype.toString=function(){return this[0]+","+this[1]},i.prototype.diff_main=function(t,e,n,r){if(void 0===r&&(r=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[new i.Diff(0,t)]:[];void 0===n&&(n=!0);var s=n,o=this.diff_commonPrefix(t,e);n=t.substring(0,o),t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var a=t.substring(t.length-o);return t=t.substring(0,t.length-o),e=e.substring(0,e.length-o),t=this.diff_compute_(t,e,s,r),n&&t.unshift(new i.Diff(0,n)),a&&t.push(new i.Diff(0,a)),this.diff_cleanupMerge(t),t},i.prototype.diff_compute_=function(t,e,n,r){if(!t)return[new i.Diff(1,e)];if(!e)return[new i.Diff(-1,t)];var s=t.length>e.length?t:e,o=t.length>e.length?e:t,a=s.indexOf(o);return-1!=a?(n=[new i.Diff(1,s.substring(0,a)),new i.Diff(0,o),new i.Diff(1,s.substring(a+o.length))],t.length>e.length&&(n[0][0]=n[2][0]=-1),n):1==o.length?[new i.Diff(-1,t),new i.Diff(1,e)]:(s=this.diff_halfMatch_(t,e))?(e=s[1],o=s[3],t=s[4],s=this.diff_main(s[0],s[2],n,r),n=this.diff_main(e,o,n,r),s.concat([new i.Diff(0,t)],n)):n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},i.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2,r=r.lineArray,t=this.diff_main(t,e,!1,n),this.diff_charsToLines_(t,r),this.diff_cleanupSemantic(t),t.push(new i.Diff(0,""));for(var s=r=e=0,o="",a="";e<t.length;){switch(t[e][0]){case 1:s++,a+=t[e][1];break;case-1:r++,o+=t[e][1];break;case 0:if(1<=r&&1<=s){for(t.splice(e-r-s,r+s),e=e-r-s,s=(r=this.diff_main(o,a,!1,n)).length-1;0<=s;s--)t.splice(e,0,r[s]);e+=r.length}r=s=0,a=o=""}e++}return t.pop(),t},i.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,s=e.length,o=Math.ceil((r+s)/2),a=2*o,h=Array(a),f=Array(a),l=0;l<a;l++)h[l]=-1,f[l]=-1;h[o+1]=0,f[o+1]=0;for(var c=0!=(l=r-s)%2,u=0,g=0,d=0,p=0,v=0;v<o&&!((new Date).getTime()>n);v++){for(var _=-v+u;_<=v-g;_+=2){for(var m=o+_,b=_==-v||_!=v&&h[m-1]<h[m+1]?h[m+1]:h[m-1]+1,y=b-_;b<r&&y<s&&t.charAt(b)==e.charAt(y);)b++,y++;if(h[m]=b,b>r)g+=2;else if(y>s)u+=2;else if(c&&(0<=(m=o+l-_)&&m<a&&-1!=f[m])){var w=r-f[m];if(b>=w)return this.diff_bisectSplit_(t,e,b,y,n)}}for(_=-v+d;_<=v-p;_+=2){for(m=o+_,b=(w=_==-v||_!=v&&f[m-1]<f[m+1]?f[m+1]:f[m-1]+1)-_;w<r&&b<s&&t.charAt(r-w-1)==e.charAt(s-b-1);)w++,b++;if(f[m]=w,w>r)p+=2;else if(b>s)d+=2;else if(!c&&(0<=(m=o+l-_)&&m<a&&-1!=h[m]&&(y=o+(b=h[m])-m,b>=(w=r-w))))return this.diff_bisectSplit_(t,e,b,y,n)}}return[new i.Diff(-1,t),new i.Diff(1,e)]},i.prototype.diff_bisectSplit_=function(t,e,i,n,r){var s=t.substring(0,i),o=e.substring(0,n);return t=t.substring(i),e=e.substring(n),s=this.diff_main(s,o,!1,r),r=this.diff_main(t,e,!1,r),s.concat(r)},i.prototype.diff_linesToChars_=function(t,e){function i(t){for(var e="",i=0,o=-1,a=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",i))&&(o=t.length-1);var h=t.substring(i,o+1);(r.hasOwnProperty?r.hasOwnProperty(h):void 0!==r[h])?e+=String.fromCharCode(r[h]):(a==s&&(h=t.substring(i),o=t.length),e+=String.fromCharCode(a),r[h]=a,n[a++]=h),i=o+1}return e}var n=[],r={};n[0]="";var s=4e4,o=i(t);return s=65535,{chars1:o,chars2:i(e),lineArray:n}},i.prototype.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],r=[],s=0;s<n.length;s++)r[s]=e[n.charCodeAt(s)];t[i][1]=r.join("")}},i.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(s,r)==e.substring(s,r)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},i.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},i.prototype.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;if(i>n?t=t.substring(i-n):i<n&&(e=e.substring(0,i)),i=Math.min(i,n),t==e)return i;n=0;for(var r=1;;){var s=t.substring(i-r);if(-1==(s=e.indexOf(s)))return n;r+=s,0!=s&&t.substring(i-r)!=e.substring(0,r)||(n=r,r++)}},i.prototype.diff_halfMatch_=function(t,e){function i(t,e,i){for(var n,r,o,a,h=t.substring(i,i+Math.floor(t.length/4)),f=-1,l="";-1!=(f=e.indexOf(h,f+1));){var c=s.diff_commonPrefix(t.substring(i),e.substring(f)),u=s.diff_commonSuffix(t.substring(0,i),e.substring(0,f));l.length<u+c&&(l=e.substring(f-u,f)+e.substring(f,f+c),n=t.substring(0,i-u),r=t.substring(i+c),o=e.substring(0,f-u),a=e.substring(f+c))}return 2*l.length>=t.length?[n,r,o,a,l]:null}if(0>=this.Diff_Timeout)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>n.length||2*r.length<n.length)return null;var s=this,o=i(n,r,Math.ceil(n.length/4));if(n=i(n,r,Math.ceil(n.length/2)),!o&&!n)return null;if(o=n?o&&o[4].length>n[4].length?o:n:o,t.length>e.length){n=o[0],r=o[1];var a=o[2],h=o[3]}else a=o[0],h=o[1],n=o[2],r=o[3];return[n,r,a,h,o[4]]},i.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,s=null,o=0,a=0,h=0,f=0,l=0;o<t.length;)0==t[o][0]?(n[r++]=o,a=f,h=l,l=f=0,s=t[o][1]):(1==t[o][0]?f+=t[o][1].length:l+=t[o][1].length,s&&s.length<=Math.max(a,h)&&s.length<=Math.max(f,l)&&(t.splice(n[r-1],0,new i.Diff(-1,s)),t[n[r-1]+1][0]=1,r--,o=0<--r?n[r-1]:-1,l=f=h=a=0,s=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;)-1==t[o-1][0]&&1==t[o][0]&&(e=t[o-1][1],n=t[o][1],(r=this.diff_commonOverlap_(e,n))>=(s=this.diff_commonOverlap_(n,e))?(r>=e.length/2||r>=n.length/2)&&(t.splice(o,0,new i.Diff(0,n.substring(0,r))),t[o-1][1]=e.substring(0,e.length-r),t[o+1][1]=n.substring(r),o++):(s>=e.length/2||s>=n.length/2)&&(t.splice(o,0,new i.Diff(0,e.substring(0,s))),t[o-1][0]=1,t[o-1][1]=n.substring(0,n.length-s),t[o+1][0]=-1,t[o+1][1]=e.substring(s),o++),o++),o++},i.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),s=n.match(i.nonAlphaNumericRegex_),o=r.match(i.nonAlphaNumericRegex_),a=s&&n.match(i.whitespaceRegex_),h=o&&r.match(i.whitespaceRegex_);n=a&&n.match(i.linebreakRegex_),r=h&&r.match(i.linebreakRegex_);var f=n&&t.match(i.blanklineEndRegex_),l=r&&e.match(i.blanklineStartRegex_);return f||l?5:n||r?4:s&&!a&&h?3:a||h?2:s||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],s=t[n][1],o=t[n+1][1],a=this.diff_commonSuffix(r,s);if(a){var h=s.substring(s.length-a);r=r.substring(0,r.length-a),s=h+s.substring(0,s.length-a),o=h+o}a=r,h=s;for(var f=o,l=e(r,s)+e(s,o);s.charAt(0)===o.charAt(0);){r+=s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1);var c=e(r,s)+e(s,o);c>=l&&(l=c,a=r,h=s,f=o)}t[n-1][1]!=a&&(a?t[n-1][1]=a:(t.splice(n-1,1),n--),t[n][1]=h,f?t[n+1][1]=f:(t.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,s=null,o=0,a=!1,h=!1,f=!1,l=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(f||l)?(n[r++]=o,a=f,h=l,s=t[o][1]):(r=0,s=null),f=l=!1):(-1==t[o][0]?l=!0:f=!0,s&&(a&&h&&f&&l||s.length<this.Diff_EditCost/2&&3==a+h+f+l)&&(t.splice(n[r-1],0,new i.Diff(-1,s)),t[n[r-1]+1][0]=1,r--,s=null,a&&h?(f=l=!0,r=0):(o=0<--r?n[r-1]:-1,f=l=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},i.prototype.diff_cleanupMerge=function(t){t.push(new i.Diff(0,""));for(var e,n=0,r=0,s=0,o="",a="";n<t.length;)switch(t[n][0]){case 1:s++,a+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:1<r+s?(0!==r&&0!==s&&(0!==(e=this.diff_commonPrefix(a,o))&&(0<n-r-s&&0==t[n-r-s-1][0]?t[n-r-s-1][1]+=a.substring(0,e):(t.splice(0,0,new i.Diff(0,a.substring(0,e))),n++),a=a.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(a,o))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),o=o.substring(0,o.length-e))),n-=r+s,t.splice(n,r+s),o.length&&(t.splice(n,0,new i.Diff(-1,o)),n++),a.length&&(t.splice(n,0,new i.Diff(1,a)),n++),n++):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=s=0,a=o=""}for(""===t[t.length-1][1]&&t.pop(),r=!1,n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),r=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),r=!0)),n++;r&&this.diff_cleanupMerge(t)},i.prototype.diff_xIndex=function(t,e){var i,n=0,r=0,s=0,o=0;for(i=0;i<t.length&&(1!==t[i][0]&&(n+=t[i][1].length),-1!==t[i][0]&&(r+=t[i][1].length),!(n>e));i++)s=n,o=r;return t.length!=i&&-1===t[i][0]?o:o+(e-s)},i.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,r=/>/g,s=/\n/g,o=0;o<t.length;o++){var a=t[o][0],h=t[o][1].replace(i,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(s,"&para;<br>");switch(a){case 1:e[o]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case-1:e[o]='<del style="background:#ffe6e6;">'+h+"</del>";break;case 0:e[o]="<span>"+h+"</span>"}}return e.join("")},i.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},i.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)-1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},i.prototype.diff_levenshtein=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var s=t[r][1];switch(t[r][0]){case 1:i+=s.length;break;case-1:n+=s.length;break;case 0:e+=Math.max(i,n),n=i=0}}return e+Math.max(i,n)},i.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case 1:e[i]="+"+encodeURI(t[i][1]);break;case-1:e[i]="-"+t[i][1].length;break;case 0:e[i]="="+t[i][1].length}return e.join("\t").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,s=0,o=e.split(/\t/g),a=0;a<o.length;a++){var h=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[r++]=new i.Diff(1,decodeURI(h))}catch(t){throw Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var f=parseInt(h,10);if(isNaN(f)||0>f)throw Error("Invalid number in diff_fromDelta: "+h);h=t.substring(s,s+=f),"="==o[a].charAt(0)?n[r++]=new i.Diff(0,h):n[r++]=new i.Diff(-1,h);break;default:if(o[a])throw Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(s!=t.length)throw Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return n},i.prototype.match_main=function(t,e,i){if(null==t||null==e||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},i.prototype.match_bitap_=function(t,e,i){function n(t,n){var r=t/e.length,o=Math.abs(i-n);return s.Match_Distance?r+o/s.Match_Distance:o?1:r}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),s=this,o=this.Match_Threshold,a=t.indexOf(e,i);-1!=a&&(o=Math.min(n(0,a),o),-1!=(a=t.lastIndexOf(e,i+e.length))&&(o=Math.min(n(0,a),o)));var h=1<<e.length-1;a=-1;for(var f,l,c,u=e.length+t.length,g=0;g<e.length;g++){for(f=0,l=u;f<l;)n(g,i+l)<=o?f=l:u=l,l=Math.floor((u-f)/2+f);u=l,f=Math.max(1,i-l+1);var d=Math.min(i+l,t.length)+e.length;for((l=Array(d+2))[d+1]=(1<<g)-1;d>=f;d--){var p=r[t.charAt(d-1)];if(l[d]=0===g?(l[d+1]<<1|1)&p:(l[d+1]<<1|1)&p|(c[d+1]|c[d])<<1|1|c[d+1],l[d]&h&&(p=n(g,d-1))<=o){if(o=p,!((a=d-1)>i))break;f=Math.max(1,2*i-a)}}if(n(g+1,i)>o)break;c=l}return a},i.prototype.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},i.prototype.patch_addContext_=function(t,e){if(0!=e.length){if(null===t.start2)throw Error("patch not initialized");for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin,(n=e.substring(t.start2-r,t.start2))&&t.diffs.unshift(new i.Diff(0,n)),(r=e.substring(t.start2+t.length1,t.start2+t.length1+r))&&t.diffs.push(new i.Diff(0,r)),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+r.length,t.length2+=n.length+r.length}},i.prototype.patch_make=function(t,e,n){if("string"==typeof t&&"string"==typeof e&&void 0===n){var r=t;2<(e=this.diff_main(r,e,!0)).length&&(this.diff_cleanupSemantic(e),this.diff_cleanupEfficiency(e))}else if(t&&"object"==typeof t&&void 0===e&&void 0===n)e=t,r=this.diff_text1(e);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)r=t;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");r=t,e=n}if(0===e.length)return[];n=[],t=new i.patch_obj;for(var s=0,o=0,a=0,h=r,f=0;f<e.length;f++){var l=e[f][0],c=e[f][1];switch(s||0===l||(t.start1=o,t.start2=a),l){case 1:t.diffs[s++]=e[f],t.length2+=c.length,r=r.substring(0,a)+c+r.substring(a);break;case-1:t.length1+=c.length,t.diffs[s++]=e[f],r=r.substring(0,a)+r.substring(a+c.length);break;case 0:c.length<=2*this.Patch_Margin&&s&&e.length!=f+1?(t.diffs[s++]=e[f],t.length1+=c.length,t.length2+=c.length):c.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(t,h),n.push(t),t=new i.patch_obj,s=0,h=r,o=a)}1!==l&&(o+=c.length),-1!==l&&(a+=c.length)}return s&&(this.patch_addContext_(t,h),n.push(t)),n},i.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],s=new i.patch_obj;s.diffs=[];for(var o=0;o<r.diffs.length;o++)s.diffs[o]=new i.Diff(r.diffs[o][0],r.diffs[o][1]);s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,e[n]=s}return e},i.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,r=[],s=0;s<t.length;s++){var o=t[s].start2+n,a=this.diff_text1(t[s].diffs),h=-1;if(a.length>this.Match_MaxBits){var f=this.match_main(e,a.substring(0,this.Match_MaxBits),o);-1!=f&&(-1==(h=this.match_main(e,a.substring(a.length-this.Match_MaxBits),o+a.length-this.Match_MaxBits))||f>=h)&&(f=-1)}else f=this.match_main(e,a,o);if(-1==f)r[s]=!1,n-=t[s].length2-t[s].length1;else if(r[s]=!0,n=f-o,a==(o=-1==h?e.substring(f,f+a.length):e.substring(f,h+this.Match_MaxBits)))e=e.substring(0,f)+this.diff_text2(t[s].diffs)+e.substring(f+a.length);else if(o=this.diff_main(a,o,!1),a.length>this.Match_MaxBits&&this.diff_levenshtein(o)/a.length>this.Patch_DeleteThreshold)r[s]=!1;else{var l;for(this.diff_cleanupSemanticLossless(o),a=0,h=0;h<t[s].diffs.length;h++){var c=t[s].diffs[h];0!==c[0]&&(l=this.diff_xIndex(o,a)),1===c[0]?e=e.substring(0,f+l)+c[1]+e.substring(f+l):-1===c[0]&&(e=e.substring(0,f+l)+e.substring(f+this.diff_xIndex(o,a+c[1].length))),-1!==c[0]&&(a+=c[1].length)}}}return[e=e.substring(i.length,e.length-i.length),r]},i.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var s=(r=t[0]).diffs;if(0==s.length||0!=s[0][0])s.unshift(new i.Diff(0,n)),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>s[0][1].length){var o=e-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],r.start1-=o,r.start2-=o,r.length1+=o,r.length2+=o}return 0==(s=(r=t[t.length-1]).diffs).length||0!=s[s.length-1][0]?(s.push(new i.Diff(0,n)),r.length1+=e,r.length2+=e):e>s[s.length-1][1].length&&(o=e-s[s.length-1][1].length,s[s.length-1][1]+=n.substring(0,o),r.length1+=o,r.length2+=o),n},i.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var s=r.start1,o=r.start2,a="";0!==r.diffs.length;){var h=new i.patch_obj,f=!0;for(h.start1=s-a.length,h.start2=o-a.length,""!==a&&(h.length1=h.length2=a.length,h.diffs.push(new i.Diff(0,a)));0!==r.diffs.length&&h.length1<e-this.Patch_Margin;){a=r.diffs[0][0];var l=r.diffs[0][1];1===a?(h.length2+=l.length,o+=l.length,h.diffs.push(r.diffs.shift()),f=!1):-1===a&&1==h.diffs.length&&0==h.diffs[0][0]&&l.length>2*e?(h.length1+=l.length,s+=l.length,f=!1,h.diffs.push(new i.Diff(a,l)),r.diffs.shift()):(l=l.substring(0,e-h.length1-this.Patch_Margin),h.length1+=l.length,s+=l.length,0===a?(h.length2+=l.length,o+=l.length):f=!1,h.diffs.push(new i.Diff(a,l)),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(h.diffs)).substring(a.length-this.Patch_Margin),""!==(l=this.diff_text1(r.diffs).substring(0,this.Patch_Margin))&&(h.length1+=l.length,h.length2+=l.length,0!==h.diffs.length&&0===h.diffs[h.diffs.length-1][0]?h.diffs[h.diffs.length-1][1]+=l:h.diffs.push(new i.Diff(0,l))),f||t.splice(++n,0,h)}}},i.prototype.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},i.prototype.patch_fromText=function(t){var e=[];if(!t)return e;t=t.split("\n");for(var n=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<t.length;){var s=t[n].match(r);if(!s)throw Error("Invalid patch string: "+t[n]);var o=new i.patch_obj;for(e.push(o),o.start1=parseInt(s[1],10),""===s[2]?(o.start1--,o.length1=1):"0"==s[2]?o.length1=0:(o.start1--,o.length1=parseInt(s[2],10)),o.start2=parseInt(s[3],10),""===s[4]?(o.start2--,o.length2=1):"0"==s[4]?o.length2=0:(o.start2--,o.length2=parseInt(s[4],10)),n++;n<t.length;){s=t[n].charAt(0);try{var a=decodeURI(t[n].substring(1))}catch(t){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==s)o.diffs.push(new i.Diff(-1,a));else if("+"==s)o.diffs.push(new i.Diff(1,a));else if(" "==s)o.diffs.push(new i.Diff(0,a));else{if("@"==s)break;if(""!==s)throw Error('Invalid patch mode "'+s+'" in: '+a)}n++}}return e},i.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},i.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[i+1]=t+encodeURI(this.diffs[i][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=i},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}h((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const r=i(10);e.default=class{constructor(t,e){this.commandHandler=t,this.port=e}handle(t){return n(this,void 0,void 0,function*(){let e=null;if(t.execute)for(let i=0;i<t.execute.sequences.length;i++){let n=t.execute.sequences[i];for(let t of n.commands)t.type in this.commandHandler&&(e=yield this.commandHandler[t.type](t))}return e})}start(){this.server=r.createServer((t,e)=>{let i="";t.on("data",t=>{i+=t}),t.on("end",()=>n(this,void 0,void 0,function*(){let t="";try{t=JSON.parse(i)}catch(t){return void e.end("")}let n=yield this.handle(t);n||(n={success:!0}),e.statusCode=200,e.setHeader("Content-Type","application/json"),e.end(JSON.stringify(n))}))}),this.server.once("error",t=>{"EADDRINUSE"!=t.code||console.error("Serenade is already running in another editor window.")}),this.server.listen(this.port)}stop(){this.server&&this.server.close()}}},function(t,e){t.exports=require("http")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),r=i(12),s=i(14);e.default=class{constructor(){this.data={},this.defaults={disable_autostart:!1,ignore:[".git/",".gradle/",".pyc$",".class$",".jar$",".dylib$"],token:""}}file(){return`${this.path()}/settings.json`}load(){if(this.data={},r.sync(this.path()),n.existsSync(this.file()))try{this.data=JSON.parse(n.readFileSync(this.file()).toString())}catch(t){}}get(t){return this.load(),void 0===this.data[t]?this.defaults[t]:this.data[t]}path(){return`${s.homedir()}/.serenade`}save(){r.sync(this.path()),n.writeFileSync(this.file(),JSON.stringify(this.data))}set(t,e){this.load(),this.data[t]=e,this.save()}}},function(t,e,i){var n=i(13),r=i(1),s=parseInt("0777",8);function o(t,e,i,a){"function"==typeof e?(i=e,e={}):e&&"object"==typeof e||(e={mode:e});var h=e.mode,f=e.fs||r;void 0===h&&(h=s&~process.umask()),a||(a=null);var l=i||function(){};t=n.resolve(t),f.mkdir(t,h,function(i){if(!i)return l(null,a=a||t);switch(i.code){case"ENOENT":o(n.dirname(t),e,function(i,n){i?l(i,n):o(t,e,l,n)});break;default:f.stat(t,function(t,e){t||!e.isDirectory()?l(i,a):l(null,a)})}})}t.exports=o.mkdirp=o.mkdirP=o,o.sync=function t(e,i,o){i&&"object"==typeof i||(i={mode:i});var a=i.mode,h=i.fs||r;void 0===a&&(a=s&~process.umask()),o||(o=null),e=n.resolve(e);try{h.mkdirSync(e,a),o=o||e}catch(r){switch(r.code){case"ENOENT":o=t(n.dirname(e),i,o),t(e,i,o);break;default:var f;try{f=h.statSync(e)}catch(t){throw r}if(!f.isDirectory())throw r}}return o}},function(t,e){t.exports=require("path")},function(t,e){t.exports=require("os")}]);
//# sourceMappingURL=extension.js.map